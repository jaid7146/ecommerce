'use strict';mix_d("ProductComparisonCards__product-comparison-desktop:product-comparison-desktop__wUWrxBuP","exports tslib @c/scoped-dom @c/aui-untrusted-ajax @c/browser-operations @c/remote-operations @c/navigation @c/dom @c/metrics @c/aui-modal".split(" "),function(E,k,J,K,L,M,N,O,t,P){function y(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var A=y(J),F=y(K),B=y(L),C=y(N),x=y(O),Q=y(P),z=function(a,c){return a.querySelector("[class*="+c+"]")},R=function(a,c,b){a=JSON.parse(a);
a.adCreativeMetaData=c.adCreativeMetaData;a.feedbackFormContainerId=b;return encodeURI(JSON.stringify(a))},S=function(a,c,b){return k.__awaiter(void 0,void 0,void 0,function(){var d,e,f,g,l,h,p;return k.__generator(this,function(q){d="adFeedbackModal_"+a;q=(null===(p=z(c,"ad-feedback-modal-container"))||void 0===p?void 0:p.className)||"";e="."+c.className+" ."+q.replace(" ",".");g=(f=b().adCreativeMetaData.adCreativeDetails)?f.length:0;l={a11yOpenMessage:"",width:Math.max(560,125*g+130)};try{return h=
Q["default"].create(d,e,l),[2,h]}catch(v){throw t.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+v);}})})},V=function(a,c,b,d,e,f,g){var l="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var h=z(x["default"].cardRoot,l);a.on("beforeShow",function(){return k.__awaiter(void 0,void 0,void 0,function(){var p,q;return k.__generator(this,function(v){switch(v.label){case 0:return p=T(a,
c,b),[4,a.render(function(m){var r="250px",n=b().adCreativeMetaData.adCreativeDetails;n&&2>n.length&&(r="150px");h.style.marginTop=r;m.innerHTML="";r=m.appendChild;n=document.getElementsByTagName("html")[0].dir;var w=x["default"].createElement("div"),u=x["default"].createElement("div");w.innerHTML=e;"rtl"===n?(w.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
u.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(w.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),u.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
u.appendChild(w);r.call(m,u);r=document.getElementsByTagName("html")[0].dir;n=x["default"].createElement("div");"rtl"===r?n.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):n.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");U(h,n,d,p,f);m.appendChild(n)})];case 1:return v.sent(),(q=document.querySelector(".a-button-close"))&&q.setAttribute("aria-label",
g),[2]}})})})},T=function(a,c,b){b=b();var d=b.adCreativeMetaData.adCreativeDetails;null===d||void 0===d?void 0:d.sort(function(e,f){return e.adCreativeIndex<f.adCreativeIndex?-1:1});return R(c,b,a.id)},U=function(a,c,b,d,e){c.appendChild(a);"function"==typeof t.uet&&t.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});F["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===b?"en-US":
b}},{pl:d,deviceType:"desktop"}).then(function(f){return k.__awaiter(void 0,void 0,void 0,function(){var g,l,h;return k.__generator(this,function(p){"function"==typeof t.uet&&t.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});t.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);g=x["default"].createElement("div");g.innerHTML=String(f.responseBody);for(l=0;l<g.children.length;++l)h=g.children[l],"SCRIPT"===h.tagName?D("script",h,c):"LINK"===h.tagName?D("link",
h,c):D("div",h,c);c.removeChild(a);return[2]})})}).catch(function(){"function"==typeof t.uet&&t.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});t.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);c.innerHTML=e});"function"==typeof t.uex&&t.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},D=function(a,c,b){var d=x["default"].createElement(a);d.innerHTML=c.innerHTML;c.getAttributeNames().forEach(function(e){d.setAttribute(e,c.getAttribute(e)||
"")});b.appendChild(d)},G={},W=function(a,c){return k.__awaiter(void 0,void 0,void 0,function(){var b,d,e,f,g,l,h,p,q;return k.__generator(this,function(v){b=z(a,"ad-feedback-primary-link");d=c().adFeedbackLabelId;e=B["default"].setup();f="open-modal"+d;g=c().adCreativeMetaData.adCreativeDetails;l=a.dataset;h=l.isDsaEnabled;p=l.weblabTreatment;q=String(h);"undefined"===q&&(q=g&&0<g.length?g[0].selectionSignals?"true":"false":"false");"true"===q&&"T1"!==p&&(q="false");e.attach(f,b);e.define(f,"click",
function(){return k.__awaiter(void 0,void 0,void 0,function(){var m;return k.__generator(this,function(r){switch(r.label){case 0:return(m=G[d])?[3,2]:[4,S(d,a,c)];case 1:m=r.sent();var n=a.dataset,w=n.formHeaderText,u=n.dsaFormHeaderText;V(m,n.adFeedbackPayload,c,n.currentLocale,"true"===q?u:w,n.formLoadErrorText,n.closeButtonAriaText);G[d]=m;r.label=2;case 2:return m.show(),[2]}})})});try{b.addEventListener("keydown",function(m){if(" "===m.key||"Enter"===m.key)m.preventDefault(),b.click()})}catch(m){console.log("Couldnt add keydown event listner")}return[2]})})},
X=function(a,c){var b=B["default"].setup(),d="mouse-enter"+c;c="mouse-leave"+c;var e=z(a,"ad-feedback-primary-link"),f=z(a,"ad-feedback-text-desktop"),g=z(a,"ad-feedback-sprite");b.attach(d,e);b.define(d,"mouseenter",function(){g.style.backgroundPosition="0px -12px";f.style.color="#111111"});b.attach(c,e);b.define(c,"mouseleave",function(){g.style.backgroundPosition="0px 0px";f.style.color="#555"})},Y=function(a){return k.__awaiter(void 0,void 0,void 0,function(){var c,b,d,e;return k.__generator(this,
function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),c=a(),b=A["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+c.adFeedbackLabelId)[0],d=b.dataset.isSponsoredLabelActive,"false"===(d||"false").toLowerCase()?[2]:[4,X(b,c.adFeedbackLabelId)];case 1:return f.sent(),[4,W(b,a)];case 2:return f.sent(),[3,4];case 3:throw e=f.sent(),t.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+e);case 4:return[2]}})})},
Z=function(a){a=x["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},ba=function(a,c){Z("p13n-sc-unified-ad-label").forEach(function(b){b={adFeedbackLabelId:b.dataset.adFeedbackLabelId||"",adFeedbackAsin:b.dataset.adFeedbackAsin||"",adId:b.dataset.adId||"",campaignId:b.dataset.campaignId||"",advertiserId:b.dataset.advertiserId||"",marketplaceId:b.dataset.marketplaceId||"",isLocationUsed:b.dataset.locationUsed||"",isInterestBasedAdsOptOut:b.dataset.interestBased||"",
title:b.dataset.asinTitle||"",price:b.dataset.asinPrice||"",currencyCode:b.dataset.currencyCode||""};b.adFeedbackLabelId&&b.adFeedbackAsin&&b.adId&&b.campaignId&&b.advertiserId&&b.marketplaceId&&b.isLocationUsed&&b.isInterestBasedAdsOptOut&&aa(b,c,a)})},aa=function(a,c,b){var d="mobile"===c?H(a.adFeedbackLabelId,I(a,"mobile")):H(a.adFeedbackLabelId,I(a,"desktop"));b(function(){return d})},I=function(a,c){var b=c=k.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title;var l=a.price;var h=a.currencyCode;
l=l&&h?{amount:l,currencyCode:h}:void 0;h=a.advertiserId;var p=a.marketplaceId;b=b.call(k,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:l,advertiserIdNS:h&&p?"axiom."+p+"."+h:void 0});d=a.isLocationUsed;a=a.isInterestBasedAdsOptOut;a=void 0===d||void 0===a?void 0:{version:1,context:!0,location:"true"===d,pastActivity:"true"===a?0:1};return{adCreativeDetails:[c.call(k,b,{selectionSignals:a})]}},H=function(a,c){return{adFeedbackLabelId:a,adCreativeMetaData:c}},ca={enableDesktopUnifiedAdLabels:function(){ba(Y,
"desktop")}},da={accepts:"text/html, application/json",timeout:2E3},ea=function(a,c){(a=c.getAttribute("data-spUrl"))&&F["default"].get(a,da).then(function(){}).catch(function(){})},ha=function(a){if(a){var c=B["default"].setup(),b=c.define;c=c.attach;b("process-swatch-click","click",function(d){return k.__awaiter(void 0,void 0,void 0,function(){var e,f,g,l,h,p,q,v,m,r,n,w;return k.__generator(this,function(u){switch(u.label){case 0:if(!d)return[2];e=d.target;f=null===e||void 0===e?void 0:e.dataset.asin;
g=e.dataset.parentAsin;if(!f||!g)return[2];l=a.querySelector("[id^=swatchesContainer-"+g+"]");h=l.querySelector("[class*=selected]");p=l.querySelector("[id^=swatch-"+f+"]");return[4,fa(h,p)];case 1:return u.sent(),q=M.setup(),[4,q.getLinkFromAsin({asin:f})];case 2:return v=u.sent(),m=l.dataset.url,r=k.__read(m?m.split(/ref(.*)/):[],2),n=r[1],v.url&&n?(w=v.url+"/ref"+n.replace(g,f),C["default"].setLocation(w)):m?C["default"].setLocation(m):C["default"].setLocation("dp/"+g),[2]}})})});c("process-swatch-click",
a)}},fa=function(a,c){return k.__awaiter(void 0,void 0,void 0,function(){var b,d;return k.__generator(this,function(e){b=k.__read(null===a||void 0===a?void 0:a.className.split(" ").filter(function(f){return-1<f.indexOf("selected")}),1);d=b[0];a.classList.remove(d);c.classList.add(d);return[2]})})},ia=function(a){a=a.querySelector("._product-comparison-desktop_desktopFaceoutStyle_comparisonTable__hYFf4");ha(a)};E._operationNames=["getLinkFromAsin"];E.card=function(){return k.__awaiter(void 0,void 0,
void 0,function(){var a,c,b;return k.__generator(this,function(d){switch(d.label){case 0:a=A["default"].cardRoot;if(!a)throw Error("Comparison widget is missing");ia(a);c=A["default"].cardRoot.querySelector("."+CSS.escape("_product-comparison-desktop_sponsoredProductsStyle_labelHeight__2uHyE"));if(!c)return[3,2];b=a.querySelectorAll("[data-spUrl]");b.forEach(function(e){e.onclick=function(f){ea(f,e)}});return[4,ca.enableDesktopUnifiedAdLabels()];case 1:d.sent(),d.label=2;case 2:return[2]}})})}});

(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("DetailPageLayoutAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","ready").execute(function(a){var b,d=a.$;a.on("a:expander:zones_progressive_disclosure_expander:toggle:collapse",function(a){(a=d("#dp-pr-top"))&&a.length||c.scrollTo({top:b})});a.on("a:expander:zones_progressive_disclosure_expander:toggle:expand",function(a){b=d(c).scrollTop()})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageBylineInfoAssets@core","DetailPageBylineInfo"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
'use strict';(function(r){var h=window.AmazonUIPageJS||window.P,m=h._namespace||h.attributeErrors,Q=m?m("SocialShareWidgetAUI","AmazonUI"):h;Q.guardFatal?Q.guardFatal(r)(Q,window):Q.execute(function(){r(Q,window)})})(function(r,h,m){function Q(d){if(Array.isArray(d)){for(var m=0,h=Array(d.length);m<d.length;m++)h[m]=d[m];return h}return Array.from(d)}"use strict";"use strict";r.register("SocialShareWidget",function(){var d;(function(){var m={353:function(d,a,c){Object.defineProperty(a,"__esModule",
{value:!0});var g=c(905),e=c(738);d=function(){function a(){var b=this;this.generateTimestampCollection=function(){var a=(new Date).getTimezoneOffset();a=b.getDateTimeByOffset(a);var t=b.getDateTimeByOffset(0);return{hitDay:a.split("T")[0],hitDatetime:a,hitDatetimeUtc:t}};this.getMarketplaceId=function(a){return"string"==typeof a?a:h.ue&&h.ue.mid?h.ue.mid:e.CSA_DEFAULT_VALUE.string};var t=this.generateTimestampCollection();this.csaMetricsData={schemaId:a.CSA_SCHEMA_ID,userAgentId:e.CSA_DEFAULT_VALUE.number,
hitDay:t.hitDay,hitDatetime:t.hitDatetime,hitDatetimeUtc:t.hitDatetimeUtc,pageType:h.ue_pty?h.ue_pty:e.CSA_DEFAULT_VALUE.string,subPageType:h.ue_spty?h.ue_spty:e.CSA_DEFAULT_VALUE.string,sessionId:h.ue&&h.ue.sid?h.ue.sid:e.CSA_DEFAULT_VALUE.string}}return a.prototype.withCSAClickEventData=function(a){var b=a.shareDataAttributes;if(this.csaMetricsData.customerId=b.customerId?b.customerId:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.httpRequestId=b.requestId?b.requestId:e.CSA_DEFAULT_VALUE.string,
this.csaMetricsData.asin=b.asin?b.asin:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.ingress=b.ingress?b.ingress:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.platform=b.platform?b.platform:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.isInternal=this.getCSANumberMapping(b.isInternal),this.csaMetricsData.isRobot=this.getCSANumberMapping(b.isRobot),this.csaMetricsData.channel=a.channel?a.channel:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.refMarker=a.refMarker?a.refMarker:e.CSA_DEFAULT_VALUE.string,
this.csaMetricsData.referrerUrl=a.refererURL?a.refererURL:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.marketplaceId=this.getMarketplaceId(b.marketplaceId),this.csaMetricsData.isExperiment=/T\d+/.test(a.treatment)?"Y":"N",this.csaMetricsData.triggeredFromScreenshotToast=!!b.triggeredFromScreenshotToast&&b.triggeredFromScreenshotToast,a.weblab)b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b)[a.weblab]=a.treatment,this.csaMetricsData.shareEntities=b;a.customizeShareCSAData&&(b=this.csaMetricsData.shareEntities,
b=void 0===b?{}:b,a.customizeShareCSAData.isCustomizedExperienceEnabled===e.TRUE&&(b.backgroundImagePhysicalId=a.customizeShareCSAData.backgroundImagePhysicalId,b.deviceCoverImagePhysicalId=a.customizeShareCSAData.deviceCoverImagePhysicalId,b.hasQuote=a.customizeShareCSAData.hasQuote,b.isCustomized=a.customizeShareCSAData.isCustomized,b.customizePreSelected=a.customizeShareCSAData.customizePreSelected,b.isQuotesAvailable=a.customizeShareCSAData.isQuotesAvailable,this.csaMetricsData.shareEntities=
b));a.isCustomShareOptionsSheetEnabled&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).isCustomShareOptionsSheetEnabled="1",this.csaMetricsData.shareEntities=b);a.caf&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).cafSwitchEnabled=a.cafSwitchEnabled?e.TRUE:e.FALSE,this.csaMetricsData.shareEntities=b);a.cafEdCXIngressWeblabTreatment&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).cafEdCxIngressWelabT1="T1"===a.cafEdCXIngressWeblabTreatment?e.TRUE:e.FALSE,b.cafEdCxIngressWelabT2=
"T2"===a.cafEdCXIngressWeblabTreatment?e.TRUE:e.FALSE);return this},a.prototype.withShareHitType=function(a){return this.csaMetricsData.shareHitType=a||e.CSA_DEFAULT_VALUE.string,this},a.prototype.getCSANumberMapping=function(a){return isNaN(Number(a))?2:Number(a)},a.prototype.getDateTimeByOffset=function(b){var c=new Date;0!==b&&(b*=a.MINUTES_TO_MILISECONDS,c=c.getTime()-b,c=new Date(c));return c.toISOString().split("Z")[0].split(".")[0]},a.prototype.logEvent=function(){(0,g.isCSALoaded)()&&h.csa(a.CSAPluginId,
{producerId:a.CSA_PRODUCER_ID})(a.CSA_LOG_EVENT,this.csaMetricsData)},a.MINUTES_TO_MILISECONDS=6E4,a.CSAPluginId="Events",a.CUSTOMIZE_SHARE_ENTITY_NAME="CustomizeShare",a.CSA_PRODUCER_ID="social-share",a.CSA_LOG_EVENT="log",a.CSA_SCHEMA_ID="SocialShareCSACustomEvent.CSAShareMetrics.8",a}();a.default=d},305:function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,g){var c={email:{label:"Email",name:"email",ref:"em",shareBaseUrl:"mailto:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"email-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(b){var u="?subject\x3d".concat(encodeURIComponent(a.emailSubject||a.title)),c="\x26body\x3d".concat(encodeURIComponent(a.title));b=encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref));return"".concat(this.shareBaseUrl).concat(u).concat(c," ").concat(b)}},pi:{label:"Pinterest",name:"pinterest",ref:"pi",shareBaseUrl:"https://www.pinterest.com/pin/create/button/",
image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b="?url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));var c="\x26description\x3d".concat(encodeURIComponent(a.title)),u="\x26media\x3d".concat(encodeURIComponent(a.image));return"".concat(this.shareBaseUrl).concat(b).concat(c).concat(u,
"\x26method\x3dbutton")}},li:{label:"Line",name:"line",ref:"li",shareBaseUrl:"https://social-plugins.line.me/lineit/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){var c="?text\x3d".concat(encodeURIComponent(a.text)," ").concat(encodeURIComponent(a.title));b="\x26url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));
return"".concat(this.shareBaseUrl).concat(c).concat(b)}},fb:{label:"Facebook",name:"facebook",ref:"fa",shareBaseUrl:"https://www.facebook.com/dialog/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b=encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref));var c=encodeURIComponent(a.shareUrl.getReturnForChannel(this.ref).replace("_r_",
"_s_")),u=encodeURIComponent("#"+(a.hashtags[0]||"Amazon"));b=["?_encoding\x3dUTF8\x26app_id\x3d465632727431967\x26display\x3dpopup","href\x3d".concat(b),"redirect_uri\x3d".concat(c),"hashtag\x3d".concat(u)].join("\x26");return"".concat(this.shareBaseUrl).concat(b)}},tw:{label:"X",name:"x",ref:"tw",shareBaseUrl:"https://twitter.com/intent/tweet",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","x-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"x-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){var c="?text\x3d".concat(encodeURIComponent(a.title));b="\x26url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));var u="\x26hashtags\x3d".concat(a.hashtags.join(",")),e="\x26via\x3d".concat(encodeURIComponent("Amazon"));return"".concat(this.shareBaseUrl).concat(c).concat(b).concat(u).concat(e)}},wa:{label:"WhatsApp",name:"whatsapp",ref:"wa",shareBaseUrl:"https://api.whatsapp.com/send?text\x3d",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"whatsapp-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","whatsapp-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(a.text),"\n              ").concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b)}},sms:{label:"SMS",name:"sms",ref:"sms",shareBaseUrl:"sms:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"sms-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","sms-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(b){b="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b)}},embed:{label:"Embed",name:"embed",ref:"eb",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-circular.svg"),
imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}},copy:{label:"Copy",name:"copy",ref:"cp",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}}};if(null==g?0:g.length){var b={};return g.forEach(function(a){c[a]&&
(b[a]=c[a])}),b}return c}},738:function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.Err={Abort:"AbortError"};d=a.CSA_HIT_TYPE={};d.CLICK_SUCCESS="click_success";d.CLICK_ERROR="click_error";d.CLICK_CANCEL="click_cancel";d.SHARE="share";d.CUSTOMIZE_SHARE="click_customize_success";a.customize="customize";a.customShareOptions="customShareOptions";a.customizeShareStateKey="customizeShareCSAData";a.CSA_DEFAULT_VALUE={string:"unknown",number:0,boolean:2};a.CAF_LEARN_MORE_KEY="learn_more_link";
a.CAF_INFO_ICON_KEY="info_icon";a.UNKNOWN="unknown";a.DEFAULT_CSA_REF_ID="u_";a.EMPTY_STRING="";a.RAW_CHANNEL_PREFIX="raw:";a.CP_CHANNEL_REF="cp";a.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF="cso_cp";a.CUSTOM_SHARE_OPTIONS_REF_PREFIX="cso";a.BOOKS_REF_PREFIX="bks";a.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE="t2cna";a.CAF_REF_PREFIX="caf";a.EMBED_CHANNEL_REF="eb";a.BEST_FORMAT_REF="ffobk";a.FALSE="false";a.TRUE="true";a.CUSTOM_SHEET_CLICK_LATENCY_METRIC="CustomShareSheet.Click";a.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC=
"Caf.CustomShareSheet.Click";a.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC="Books.CustomShareSheet.Click";a.SSF_AUI_PACKAGE_ATTRIBUTION="SocialShareWidgetAUI";a.REGEX_TO_REF_ID_AND_CHANNEL_APP={instagram:{refId:"in",channel:"Instagram"},snap:{refId:"sn",channel:"Snapchat"},discord:{refId:"di",channel:"Discord"},viber:{refId:"vi",channel:"Viber"},telegram:{refId:"te",channel:"Telegram"},pinterest:{refId:"pi",channel:"Pinterest"},qzone:{refId:"qz",channel:"QQ Zone"},renren:{refId:"re",channel:"Renren"},
twitter:{refId:"tw",channel:"Twitter"},airdrop:{refId:"ar",channel:"AirDrop"},tencentweibo:{refId:"tc",channel:"Tencent Weibo"},wechatmoment:{refId:"wm",channel:"WeChat Moment"},line:{refId:"li",channel:"Line"},whatsapp:{refId:"wa",channel:"Whatsapp"},weibo:{refId:"si",channel:"Sina Weibo"},facebook:{refId:"fb",channel:"Facebook"}};a.defaultShareDataAttributes={isInternal:a.CSA_DEFAULT_VALUE.boolean,isRobot:a.CSA_DEFAULT_VALUE.boolean,userAgent:a.CSA_DEFAULT_VALUE.number,platform:a.CSA_DEFAULT_VALUE.string,
ingress:a.CSA_DEFAULT_VALUE.string,asin:a.CSA_DEFAULT_VALUE.string,requestId:a.CSA_DEFAULT_VALUE.string,customerId:a.CSA_DEFAULT_VALUE.string,marketplaceId:a.CSA_DEFAULT_VALUE.string};a.defaultCustomizeShareCSAData={backgroundImagePhysicalId:a.EMPTY_STRING,deviceCoverImagePhysicalId:a.EMPTY_STRING,hasQuote:a.EMPTY_STRING,isCustomizedExperienceEnabled:a.EMPTY_STRING,isCustomized:a.EMPTY_STRING}},905:function(d,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.isSafari=a.isCSALoaded=a.isNativeAppShareAvailable=
a.isNativeWebShareAvailable=a.isMobileWeb=a.isMobileApp=a.isDesktop=a.isIpadIOS=a.isIOS=a.isAndroid=a.isIE=a.isAUILoaded=a.isUeAvailable=a.isClipboardAvailable=a.isRTL=a.isTwisterAsin=a.context=a.Device=void 0;var g,e=c(161);!function(a){a.Android="apan";a.IOS="apin";a.MWeb="mwn";a.Other="ud"}(g||(a.Device=g={}));a.context=function(){var b=g.Other;(0,a.isMobileApp)()&&(0,a.isAndroid)()?b=g.Android:(0,a.isMobileApp)()&&(0,a.isIOS)()?b=g.IOS:(0,a.isMobileWeb)()&&(b=g.MWeb);var c="unknown";return(0,
a.isMobileApp)()?c="mshop":(0,a.isMobileWeb)()?c="mweb":(0,a.isDesktop)()&&(c="desktop"),{device:b,page:(0,a.isUeAvailable)()?h.ue_pty:"unknown",subPage:(0,a.isUeAvailable)()?h.ue_spty||h.ue_pti:"unknown",platform:c}};a.isTwisterAsin=function(){return!!h.isTwisterPage||!!h.twisterController||b};a.isRTL=function(){return"rtl"===document.dir};a.isClipboardAvailable=function(){return!!navigator.clipboard&&(0,e.isFunction)(navigator.clipboard.writeText)};a.isUeAvailable=function(){return!!h.ue};a.isAUILoaded=
function(){var a;return"undefined"!=typeof h&&(0,e.isString)(null===(a=null===h||void 0===h?void 0:h.P)||void 0===a?void 0:a.AUI_BUILD_DATE)};a.isIE=function(){return(0,e.testUserAgent)(/MSIE|Trident/i)};a.isAndroid=function(){return(0,e.testUserAgent)(/android.([1-9]|[L-Z])/i)&&!(0,e.testUserAgent)(/trident|Edge/i)};a.isIOS=function(){return(0,e.testUserAgent)(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&!(0,e.testUserAgent)(/trident|Edge/i)};a.isIpadIOS=function(){return(0,e.testUserAgent)(/[a-zA-z]{1,}\/[0-99].[0-99] \(Macintosh; [a-zA-z]{1,} Mac OS X [1-9][0-9]*_[1-9][0-9]*_[1-9][0-9]*\) AppleWebKit\/[1-9][0-9]*.[1-9][0-9]*.[1-9][0-9]*/)||
(0,e.testUserAgent)(/iPad/)};a.isDesktop=function(){return!((0,a.isAndroid)()||(0,a.isIOS)()||(0,a.isMobileApp)()||(0,a.isMobileWeb)())};a.isMobileApp=function(){return/(Windowshop|Amazon|Amazon\.com)\//.test((0,e.getCookie)("amzn-app-id"))};a.isMobileWeb=function(){return 450>=h.screen.availWidth&&((0,e.testUserAgent)(/mobile|mini/i)||(0,a.isAndroid)()||(0,a.isIOS)())};a.isNativeWebShareAvailable=function(){return h.navigator&&(0,e.isFunction)(h.navigator.share)};a.isNativeAppShareAvailable=function(a){return a&&
(0,e.isFunction)(a.share)};a.isCSALoaded=function(){return(0,e.isFunction)(h.csa)};a.isSafari=function(){var a;return/apple/i.test(null===(a=h.navigator)||void 0===a?void 0:a.vendor)};var b=!1;(0,a.isAUILoaded)()&&h.P.when("mobile-inline-twister-critical").execute(function(){b=!0});a.default={context:a.context,isTwisterAsin:a.isTwisterAsin,isClipboardAvailable:a.isClipboardAvailable,isUeAvailable:a.isUeAvailable,isAUILoaded:a.isAUILoaded,isIE:a.isIE,isAndroid:a.isAndroid,isDesktop:a.isDesktop,isIOS:a.isIOS,
isIpadIOS:a.isIpadIOS,isMobileApp:a.isMobileApp,isMobileWeb:a.isMobileWeb,isNativeWebShareAvailable:a.isNativeWebShareAvailable,isNativeAppShareAvailable:a.isNativeAppShareAvailable,isCSALoaded:a.isCSALoaded,isSafari:a.isSafari,isRTL:a.isRTL}},495:function(d,a,c){Object.defineProperty(a,"__esModule",{value:!0});var g=c(905),e=c(353),b=c(738);d=function(){function a(){}return a.logCountOnce=function(a){(0,g.isUeAvailable)()&&h.ue.count(a,(h.ue.count(a)||0)+1)},a.emitFullMetricName=function(a,b,c){var e=
this;(0,g.isAUILoaded)()&&h.P.when("A").execute(function(k){k.trigger("".concat(e.BASE_METRIC_NAME,":metrics:logged"),{fullMetricName:a,callee:b,message:c})})},a.logCounter=function(a,b){b=b?".".concat(b):"";a="".concat(this.BASE_METRIC_NAME,".").concat(a).concat(b);this.emitFullMetricName(a,"logCounter");this.logCountOnce(a)},a.logCounterRefactor=function(a,b){b=b?".".concat(b.toLowerCase()):"";a="".concat(this.BASE_METRIC_NAME).concat(b,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());
this.emitFullMetricName(a,"logCounterRefactor");this.logCountOnce(a)},a.logLoad=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());this.logCountOnce(a)},a.logFatal=function(a){(0,g.isAUILoaded)()&&h.P.log(a,"FATAL",this.BASE_METRIC_NAME)},a.logCSAEvent=function(a,b){(0,g.isCSALoaded)()&&(new e.default).withCSAClickEventData(b).withShareHitType(a).logEvent()},a.startTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,
".").concat(a);this.timers[a]=h.uet&&h.uet("bb",a,{wb:1})},a.stopTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,".").concat(a);var b=this.timers[a];(0,g.isUeAvailable)()&&b&&(b=h.uet("be",a,{wb:1})-b,h.ue.count(a,b),h.uex&&h.uex("ld",a,{wb:1}),this.emitFullMetricName(a,"stopTimer","".concat(b,"ms")),delete this.timers[a],this.timers["".concat(a,"_done_in")]=b)},a.BASE_METRIC_NAME="SocialShareFramework",a.LATENCY="Latency",a.platform=b.UNKNOWN,a.metricName="",a.timers=
{},a.getMetricName=function(b,c){var e;if(void 0===c&&(c=""),(0,g.isUeAvailable)()){var d=(0,g.context)();a.platform=d.platform;a.metricName=c?".".concat(c.toLowerCase()):""}b=b('[data-action\x3d"ssf-share-icon"]').data();c=c?".".concat(c):"";return b?(b=(null===(e=b.ssfShareIcon)||void 0===e?void 0:e.shareDataAttributes)||{},e=b.ingress,b=b.platform,b=void 0===b?"unknown":b,"".concat(void 0===e?"unknown":e,".").concat(b).concat(c).toLowerCase()):""},a}();a.default=d},241:function(d,a,c){Object.defineProperty(a,
"__esModule",{value:!0});var g,e=c(905),b=c(738);!function(a){a.RETURN="r";a.CLICK="cl"}(g||(g={}));d=function(){function a(a,c){if(void 0===a&&(a="ur"),void 0===c&&(c=void 0),this.PREFIX="cm_sw",this.id="",this.refId="",this._isBestFormatEnabled=!1,this.cxt={device:e.Device.Other,page:"",subPage:"",platform:b.UNKNOWN},2>a.length)throw new TypeError("refId must be 2 or more characters long");this.refId=a;this.cxt=(0,e.context)();this.treatment=c;this.generateUniqueId()}return Object.defineProperty(a.prototype,
"isBestFormatEnabled",{set:function(a){this._isBestFormatEnabled=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"return",{get:function(){return this.get(g.RETURN)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.get(g.CLICK)},enumerable:!1,configurable:!0}),a.prototype.getReturnForChannel=function(a){var c,e=null!==(c=this.treatment)&&void 0!==c?c:"";return[this.PREFIX,g.RETURN,this._isBestFormatEnabled?b.BEST_FORMAT_REF:
"",a,this.cxt.device,this.refId,e,this.id].filter(function(a){return a&&""!==a}).join("_")},a.prototype.getClickForChannel=function(a){return[this.PREFIX,g.CLICK,this._isBestFormatEnabled?b.BEST_FORMAT_REF:"",a,this.cxt.device,this.refId,this.id].filter(function(a){return a&&""!==a}).join("_")},a.prototype.generateUniqueId=function(){var a,b=null===(a=null===h||void 0===h?void 0:h.ue)||void 0===a?void 0:a.rid;return b||(b="".concat(Math.random().toString(36).slice(2)).concat(Math.random().toString(36).slice(2)).substring(0,
13)),this.id=b},a.prototype.get=function(a){var c,e=null!==(c=this.treatment)&&void 0!==c?c:"";return[this.PREFIX,a,this._isBestFormatEnabled?b.BEST_FORMAT_REF:"",this.cxt.device,this.refId,e,this.id].filter(function(a){return a&&""!==a}).join("_")},a}();a.default=d},198:function(d,a,c){var g=this&&this.__assign||function(){return g=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++)for(var d in b=arguments[c])Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},g.apply(this,
arguments)};Object.defineProperty(a,"__esModule",{value:!0});var e,b=c(495),m=c(905),n=c(474),f=c(161),q=c(738);(0,m.isAUILoaded)()&&h.P.when("mash").execute(function(a){return e=a});d=function(){function a(a){this.sheetOptions={title:q.EMPTY_STRING,text:q.EMPTY_STRING,shareUrl:new n.default("http://amazon.com/","ur"),lang:"en",shareDataAttributes:q.defaultShareDataAttributes,refererURL:"",image:"",customizeShareCSAData:q.defaultCustomizeShareCSAData,isCustomShareOptionsSheetEnabled:!1};this.sheetOptions=
g(g({},this.sheetOptions),a);this.shareUrl=a.shareUrl}return a.prototype.launchNativeWeb=function(){var a,c=this,e=this.sheetOptions.shareDataAttributes.ingress,d={channel:q.EMPTY_STRING,refMarker:this.shareUrl.refMarker.click,refererURL:this.sheetOptions.refererURL,shareDataAttributes:this.sheetOptions.shareDataAttributes,customizeShareCSAData:this.sheetOptions.customizeShareCSAData},g=this.shareUrl.return;this.sheetOptions.tinyUrl&&(g=this.sheetOptions.tinyUrl,b.default.logCounter("MWeb.Tiny.Success"),
b.default.logCounterRefactor("Tiny.Success",e));var m=(0,f.isFunction)(this.sheetOptions.sheetShownCallback);try{null===(a=null===h||void 0===h?void 0:h.navigator)||void 0===a||a.share({url:g,title:this.sheetOptions.title,text:this.sheetOptions.text}).then(function(){m&&c.sheetOptions.sheetShownCallback();b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_SUCCESS,d);b.default.logCSAEvent(q.CSA_HIT_TYPE.SHARE,d);b.default.logCounterRefactor("ChannelClick",c.sheetOptions.shareDataAttributes.ingress);b.default.logCounter("ShareClick")}).catch(function(a){m&&
c.sheetOptions.sheetShownCallback();b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_SUCCESS,d);a.name===q.Err.Abort&&b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_CANCEL,d)})}catch(B){b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_ERROR,d)}},a.prototype.launchNativeApp=function(){var a=this,c=this.shareUrl.refMarker.click,d=this.sheetOptions.shareDataAttributes,A=this.sheetOptions.refererURL,w=this.sheetOptions.customizeShareCSAData,m=this.sheetOptions.shareDataAttributes.ingress,n=q.EMPTY_STRING,p=this.sheetOptions.caf||
!1,u=this.sheetOptions.cafSwitchEnabled||!1,t=this.sheetOptions.isCustomShareOptionsSheetEnabled||!1,h=this.shareUrl.return;this.sheetOptions.tinyUrl&&(h=this.sheetOptions.tinyUrl,b.default.logCounter("MShop.Tiny.Success"),b.default.logCounterRefactor("Tiny.Success",m));var v={channel:n,refMarker:c,refererURL:A,shareDataAttributes:d,customizeShareCSAData:w,caf:p,cafSwitchEnabled:u,isCustomShareOptionsSheetEnabled:t};c={messagePlain:this.getShareMessage,messagePlain160:this.getShare160Message,messagePlain140:this.getShare140Message,
messageHTML:this.getShareMessage,url:h,imageURL:this.sheetOptions.image,subject:this.sheetOptions.text};null==e||e.share(g(g({},c),{successCallback:function(){(0,f.isFunction)(a.sheetOptions.sheetShownCallback)&&a.sheetOptions.sheetShownCallback();b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_SUCCESS,v)},failCallback:function(){b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_ERROR,v)},shareServiceSelectedCallback:function(c){c&&"'null'"!==c?((0,f.isFunction)(a.sheetOptions.channelSelectCB)&&a.sheetOptions.channelSelectCB(c),
v.channel=a.getChannelByKeyword(c).channel,c=a.getChannelByKeyword(c).refId,v.refMarker=a.shareUrl.refMarker.getClickForChannel(c),b.default.logCSAEvent(q.CSA_HIT_TYPE.SHARE,v),b.default.logCounterRefactor("ChannelClick",a.sheetOptions.shareDataAttributes.ingress),b.default.logCounter("ShareClick"),(0,f.isFunction)(a.sheetOptions.sdTooltipCallback)&&a.sheetOptions.sdTooltipCallback()):b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_CANCEL,v)}}))},a.prototype.launch=function(a){(0,m.isNativeAppShareAvailable)(e)?
this.launchNativeApp():(0,m.isNativeWebShareAvailable)()?this.launchNativeWeb():(0,f.isFunction)(a)?a():(b.default.logCounter("Click.ShareUnavailable"),b.default.logCounterRefactor("Click.ShareUnavailable",this.sheetOptions.shareDataAttributes.ingress))},Object.defineProperty(a.prototype,"getShare160Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return,b=a.length+2;b=(0,f.truncate)(this.sheetOptions.title,160-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),
Object.defineProperty(a.prototype,"getShare140Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return,b=a.length+2;b=(0,f.truncate)(this.sheetOptions.title,140-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),a.prototype.getRefByRegex=function(a){return q.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].refId},a.prototype.getChannelByRegex=function(a){return q.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].channel},a.prototype.getChannelByKeyword=function(a){var b=q.RAW_CHANNEL_PREFIX+
a,c=q.DEFAULT_CSA_REF_ID,k=a.match(/instagram|snap|discord|viber|telegram|pinterest|qzone|renren|twitter|airdrop|tencentweibo|wechatmoment|line|whatsapp|weibo|^Facebook$/ig);if(k&&k.length)return{channel:this.getChannelByRegex(k[0].toLowerCase()),refId:this.getRefByRegex(k[0].toLowerCase())};switch(!0){case /android.messaging|sms|android.apps.messaging|mms/gi.test(a):b="SMS";c="sm";break;case /outlook|mail/gi.test(a):b="Email";c="em";break;case /clipboardactivity|copy/gi.test(a):b="Copy";c="cp";break;
case /facebook.composer/gi.test(a):b="Facebook";c="fb";break;case /facebook.messenger|FacebookMessenger/gi.test(a):b="FacebookMessenger";c="fm";break;case /tencent|wechat/gi.test(a):b="WeChat";c="we";break;case /unknown|null/gi.test(a):b="unknown",c="u"}return{channel:b,refId:c}},Object.defineProperty(a.prototype,"getShareMessage",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return;return"".concat(this.sheetOptions.title," ").concat(a)},enumerable:!1,configurable:!0}),a}();a.default=
d},474:function(d,a,c){Object.defineProperty(a,"__esModule",{value:!0});var g=c(241);d=function(){function a(b,c,d){this.REF_PARAM_NAME="ref_";a.isValid(b)||(b=a.getDefault());this.url=new URL(b);this._refMarker=new g.default(c,d)}return a.prototype.getUpdatedUrl=function(a){var b=new URL(this.raw);return b.searchParams.set(this.REF_PARAM_NAME,a),b.toString()},Object.defineProperty(a.prototype,"raw",{get:function(){return this.url.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,
"refMarker",{get:function(){return this._refMarker},enumerable:!1,configurable:!0}),a.isValid=function(a){try{new URL(a)}catch(u){return!1}return!0},a.getDefault=function(){var a,c,d=null===(a=null===h||void 0===h?void 0:h.location)||void 0===a?void 0:a.href;if(!d)return(null===(c=null===h||void 0===h?void 0:h.ue)||void 0===c?0:c.sn)?"https://".concat(h.ue.sn):"https://amazon.com";a=new URL(d);c=a.searchParams.has("psc")?"?psc\x3d1":"";return h.ue_pti?"".concat(h.location.origin,"/dp/").concat(h.ue_pti).concat(c):
(a.search=c,a.href)},a.prototype.getReturnForChannel=function(a){a=this._refMarker.getReturnForChannel(a);return this.getUpdatedUrl(a)},a.prototype.getClickForChannel=function(a){a=this._refMarker.getClickForChannel(a);return this.getUpdatedUrl(a)},Object.defineProperty(a.prototype,"return",{get:function(){return this.getUpdatedUrl(this._refMarker.return)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.getUpdatedUrl(this._refMarker.click)},enumerable:!1,
configurable:!0}),a}();a.default=d},161:function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.getDPXObject=a.sanitizeInput=a.getCookie=a.testUserAgent=a.truncate=a.isString=a.isEmpty=a.isNumber=a.isFunction=void 0;a.isFunction=function(a){return"function"==typeof a};a.isNumber=function(a){return!isNaN(a)&&"number"==typeof a};a.isEmpty=function(a){return!a||!a.length};a.isString=function(a){return"string"==typeof a};a.truncate=function(a,d){void 0===a&&(a="");var c=Array(3).fill(".");return a.length>
d?a.substring(0,d-3)+c.join(""):a};a.testUserAgent=function(a){if(!h&&!h.navigator)return!1;try{return a.test(h.navigator.userAgent)}catch(g){return!1}};a.getCookie=function(a){a="".concat(a,"\x3d");for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var b=c[d];" "==b.charAt(0);)b=b.substring(1);if(0==b.indexOf(a))return b.substring(a.length,b.length)}return""};a.sanitizeInput=function(a){return a.replace(/[<>&'"]/g,function(a){switch(a){case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";
case "\x26":return"\x26amp;";case "'":return"\x26#39;";case '"':return"\x26quot;";default:return a}})};a.getDPXObject=function(){var a,d;return null===(d=null===(a=h.DetailPage)||void 0===a?void 0:a.StateController)||void 0===d?void 0:d.state};a.default={isFunction:a.isFunction,isNumber:a.isNumber,isEmpty:a.isEmpty,isString:a.isString,truncate:a.truncate,testUserAgent:a.testUserAgent,getCookie:a.getCookie,getDPXObject:a.getDPXObject}},156:function(d,a){Object.defineProperty(a,"__esModule",{value:!0});
a.default={}},519:function(d,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.SocialShareCore=void 0;d=c(305);var g=c(474),e=c(156),b=c(495),m=c(198),n=c(241),f=c(905),q=c(738);c=c(161);a.SocialShareCore={Channels:d.default,Url:g.default,Translations:e.default,Metrics:b.default,ShareSheet:m.default,RefMarker:n.default,Detection:f.default,Constants:q,ToolBelt:c};a.default=a.SocialShareCore}},v={};d=function c(a){var d=v[a];if(void 0!==d)return d.exports;d=v[a]={exports:{}};return m[a].call(d.exports,
d,d.exports,c),d.exports}(519)})();return d});"use strict";r.register("SocialShareWidgetConfig",function(){var d=Object.freeze({MODAL:"modal",POPOVER:"popover"}),m=Object.freeze({IOS:"ios",ANDROID:"android",ARROW:"arrow",VARIABLE:"variable"});return{WIDGET_TYPE:d,WIDGET_ICON:m,excludedChannels:["sms","wa"],lineMarketplaces:["A1VC38T7YXB528"],cnMarketplace:["AAHKV2X7AFYLW"],nonCNChannels:["fb","tw","pi"],defaultShareData:{url:"",title:location.hostname,text:"",image:"",hashtags:["Amazon"],type:d.POPOVER,
lang:"en",refId:"ts",channels:[],refererURL:"",treatment:"",weblab:"",customize:!1,previewDoh:!1,caf:!1,displayCustomShareSheet:!1,cafSwitch:!1,eventPreviewTreatment:"C",cafIngressId:"",cafIngressTreatment:"C",t:{},associateLink:{},popoverPosition:"triggerBottom",popoverDistance:48,defaultCustomShareOptions:{email:{label:"Email",image:"customchannels-email.png",ref:"em",shareUrl:"mailto:?subject\x3d{subject}\x26body\x3d{body}\x26url\x3d{url}",className:"email",stringId:"taf_customshare_email"},copy:{label:"Copy",
image:"customchannels-link.png",ref:"cp",shareUrl:"",className:"custom-share-copy",stringId:"taf_customshare_copy"},more:{label:"More",image:"customchannels-more.png",ref:"",shareUrl:"",className:"custom-share-native-sheet",stringId:"taf_customshare_more"}},isFallbackShareUrlEnabled:!1,isNewIMessagePreviewGating:!1,isOnShareGatingEnabled:!1,isIpadFixesEnabled:!1,isNewWhatsAppPreview:!1,isBestFormatEnabled:!1,isCafPreviewGenerationMigrationEnabled:!1,isUnrecognizedUsersRichPreviewEnabled:!1,customizePreSelected:!1,
isUnsignedShareSheetGatingEnabled:!1,isUnsignedShareSheetCopyLinkOverrideEnabled:!1,isShortTitleGatingEnabled:!1,isShortTitleAsyncGatingEnabled:!1,titleSource:"",isMWebCustomShareSheetGatingEnabled:!1,isMWebCustomShareSheetLaunchGatingEnabled:!1,isMWebCustomShare:!1,isMWebCustomShareRichPreviewEnabledOverride:!1},defaultWidgetData:{icon:m.VARIABLE,background:!0,width:24},shareDataAttributes:{isInternal:2,isRobot:2,userAgent:h.navigator.userAgent,platform:"DESKTOP",ingress:h.ue_pty,asin:h.ue_pti,requestId:h.ue_id,
customerId:"",marketplaceId:h.ue_mid,triggeredFromScreenshotToast:!1},iconMap:{ios:"https://m.media-amazon.com/images/G/01/share-icons/share-std.svg",android:"https://m.media-amazon.com/images/G/01/share-icons/share-android.svg",arrow:"https://m.media-amazon.com/images/G/01/share-icons/share-icon-experiment.svg"},customShareOptions:[]}});"use strict";r.when("A","SocialShareWidget","SocialShareWidgetTemplating","SocialShareWidgetConfig","SocialShareWidgetState","SocialShareWidgetNativeUtils","SocialShareWidgetOnShareUtils").register("SocialShareWidgetAUI",
function(d,f,v,n,a,c,g){var e=f.SocialShareCore,b=e.Metrics,u=0,t=function(){},C=!1,q=b.getMetricName(d.$);b.startTimer(q);b.logCounter("DPX.Desktop.ImageBlockRender");try{(function(){var f=d.$,k=e.Detection,l=e.Translations,y=e.Channels,A=e.Url,w=e.Constants,x=function(a){a=a.data("share")||a.find("[data-share]").data("share");return d.extend({},n.defaultWidgetData,a)},B=f(".ssf-share-trigger"),p=n.defaultShareData,E=x(B),H=p.url,R=f("#ac-getlink-bottomsheet"),L=f('[data-action\x3d"ssf-share-icon"]'),
z=function(){var a=n.iconMap;if(E.icon===n.WIDGET_ICON.ARROW)return a.arrow;if(k.isDesktop())return a.ios;if(E.icon===n.WIDGET_ICON.VARIABLE){var b=d.$("#ssf-primary-widget-desktop");p=d.extend(p,b.data("ssfShareIcon"));b=a.android;if(k.isIOS()||p.isIpadFixesEnabled&&k.isIpadIOS())b=a.ios;return b}return a[E.icon]},W=function(a){a.find('[class*\x3d"ssf-multi-"]').length||a.find(".ssf-share-trigger").addClass("ssf-multi-"+Math.random().toString(36).slice(2));B=a.find('[class*\x3d"ssf-multi-"]')},F=
void 0,I=void 0,K=void 0,M=void 0,U=void 0,V=void 0,S=void 0;r.when("a-sheet").execute(function(a){return F=a});r.when("a-popover").execute(function(a){return I=a});r.when("a-modal").execute(function(a){return K=a});r.when("SocialShareWidgetTiny").execute(function(a){return S=a});var T=function(a,b){var c=2<arguments.length&&arguments[2]!==m?arguments[2]:"ssf-share-bottom-sheet",d=p.displayCustomShareSheet||p.customize||p.caf;if(!M||d)M=F.create({name:c,inlineContent:a,closeType:"icon",height:b});
F.showSheet(M)},G=function(a){var b=a.type===n.WIDGET_TYPE.POPOVER&&I,c=a.type===n.WIDGET_TYPE.MODAL&&K;a=v.build(a);F?T(a.getBottom()):b?(b=a.getPopover(),B.hasClass("a-declarative")||(U=I.create(B,{name:"ssf-share-popover",position:p.popoverPosition,inlineContent:b,activate:"onclick",closeButton:!0,width:160,padding:"none",popoverLabel:"Share Popup",closeButtonLabel:"Close Share Popup"}).show())):c&&(b=a.getModal(),B.hasClass("a-declarative")||(V=K.create(B,{name:"ssf-share-modal",inlineContent:b,
width:600,popoverLabel:"Share Modal"}).show()))},Y=function(a){if(a.displayCustomShareSheet||a.customize||a.caf)b.logCounter("webview.sharesheet.caf.background"),b.logCounterRefactor("webview.sharesheet.caf.background",a.shareDataAttributes.ingress),r.when("mash").execute(function(a){a.addEventListener("appPause",J)})},O=function(a){r.when("SocialShareWidgetCustomize").execute(function(b){v.build(a).getCustomize(function(c){T(c,650,"ssf-customize-bottom-sheet");b.init(a,G,J);Y(a)})})},J=function aa(){r.when("mash").execute(function(a){a.removeEventListener("appPause",
aa)});U&&I.get(B).hide();M&&F.hideSheet(M);V&&K.get(B).hide()},N=function(){var a=p.shareDataAttributes.asin,b=h.DetailPage;if(!b)return!1;b=b.StateController&&b.StateController.getState().current_asin;p.shareDataAttributes.asin="string"==typeof b?b:a;return a!==b},Z=function(a,c,l){var e=a.shareDataAttributes,g=a.t;b.logCSAEvent(w.CSA_HIT_TYPE.SHARE,c);b.logCounter("DPX.Desktop.CopySuccess");b.logCounter("Share.CopySuccess");b.logCounter(q,"CopySuccess");b.logCounterRefactor("CopySuccess",e.ingress);
k.isDesktop()?function(){var a=l.find(".copy-label");a.text(g.taf_copy_url_changeover);d.delay(function(){J();a.text(g.taf_copy_name)},1E3)}():(f(".ssf-feedback").show(),J())},ca=function(a){b.logCSAEvent(w.CSA_HIT_TYPE.CLICK_ERROR,a);b.logCounter("DPX.Desktop.CopyFailure");b.logCounter("Share.CopyFailure");b.logCounter(q,"CopyFailure")},P=function(a){var c=a.shareData,d=a.channelRef,k=c.shareUrl;a=c.socialLinks;var l=a===m?{}:a;a=c.dealsPreviewEnabled;a=a===m?!1:a;var e=c.eventPreviewTreatment;e=
e===m?"C":e;k.refMarker.isBestFormatEnabled=c.isBestFormatEnabled;k=d?k.getReturnForChannel(d):k.return;d=g.getChannelName(d);var p=g.getOsType();l=l.shareframework||c.url;var q=c.aapiBaseUrl;q=q===m?"":q;var w=c.shareAapiCsrfToken;w=w===m?"":w;var y=c.tinyUrlEnabled;y=y===m?!1:y;var A=c.deeplinkInfo;A=A===m?{}:A;var z=c.storeId;z=z===m?"":z;var f=c.isOnShareGatingEnabled;f=f===m?!1:f;var x=c.shareDataAttributes,n=x.marketplaceId;n=n===m?"":n;x=x.ingress;x=x===m?"":x;c.isUnrecognizedUsersRichPreviewEnabled&&
(k=new URL(k),k.searchParams.append("starsLeft",1),k=k.toString());"c"!==e.toLowerCase()&&(k=new URL(k),c=e.match(/^T(\d+)$/),k.searchParams.append("peakEvent",c[1]),k.searchParams.append("dealEvent",a?"1":"0"),k=k.toString(),b.logCounterRefactor("EventPreview"+e,x));return{tinyUrlEnabled:y,aapiBaseUrl:q,shareAapiCsrfToken:w,marketplaceId:n,url:k,isOnShareGatingEnabled:f,extractedRef:d,osType:p,originalUrl:l||k,refMarkerId:u++,deeplinkInfo:A,storeId:z}};f(document).delegate(".ssf-channel:not(.copy,.embed)",
"click",function(a){a.preventDefault();a.stopPropagation();b.logCounter("DPX.Desktop.ChannelClick");b.logCounter("ShareClick");b.logCounter(q,"ChannelClick");b.logCounterRefactor("ChannelClick",p.shareDataAttributes.ingress);var l=f(this),e=l.data("key"),g=p;a=g.refererURL;var y=g.shareDataAttributes,A=g.treatment;A=A===m?"":A;var z=g.weblab;z=z===m?"":z;var x=g.builtChannels[e],n=x.ref;e=g.shareUrl.refMarker.getClickForChannel(n);g=x.name;var N=x.getSharingUrl();b.logCSAEvent(w.CSA_HIT_TYPE.SHARE,
{channel:g,refMarker:e,refererURL:a,shareDataAttributes:y,treatment:A,weblab:z});a=P({shareData:p,channelRef:n});c.showSpinner(l);S.fetch({data:a,callback:function(a){c.hideSpinner(l);a&&(N=x.getSharingUrl(a),b.logCounter("Desktop.Tiny.Success"),b.logCounterRefactor("Tiny.Success",y.ingress));if("em"===n)h.open(N,"_self");else if(k.isDesktop()){a=screen.width;var e=screen.height,g="pi"===n?900:600,q=Math.min(g,.7*a);g=Math.min(g,.7*e);h.open(N,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+q+",height\x3d"+
g+",top\x3d"+(e/2-g/2)+",left\x3d"+(a/2-q/2))}else h.open(N,"_blank");J();d.trigger("ssf:event:share",p)}})});d.declarative("ssf-share-icon","click",function(e){b.logCounter("DPX.Desktop.SheetClick");b.logCounter("SheetClick");b.logCounter(q,"SheetClick");if(C)return J();W(e.$currentTarget);p=d.extend(p,e.data);p.shareDataAttributes=d.extend(n.shareDataAttributes,e.data.shareDataAttributes);var g=p.shareDataAttributes.ingress;b.logCounterRefactor("SheetClick",g);if(!d.objectIsEmpty(e.data.associateLink)&&
R.length)b.logCounter("SheetClick.Associate"),d.trigger("ac-getlink-bottomsheet-event",p);else{d.extend(l[p.lang],p.t);var m=y(p,p.channels);p.builtChannels=m;p.url=p.url.startsWith("/")?""+h.location.origin+p.url:p.url;p.shareUrl=new A(p.url,p.refId);N()&&(p.shareUrl=new A(p.url,p.refId),p.shareUrl.url.searchParams.set("psc",1));a.set("shareData",p);!k.isDesktop()||p.isIpadFixesEnabled&&k.isIpadIOS()&&k.isNativeWebShareAvailable()?p.displayCustomShareSheet||p.customize||p.caf?O(p):c.launchNativeShareSheet(e,
p,P,G):(p.isUnrecognizedUsersRichPreviewEnabled&&p.shareUrl.url.searchParams.set("starsLeft",1),p.image=p.image||f("#imgTagWrapperId img").attr("src"),G(p),b.logCounter("DPX.Desktop.SheetOpen"),b.logCounter("SheetOpen"),b.logCounter(q,"SheetOpen"),b.logCounterRefactor("SheetOpen",g),b.logCSAEvent(w.CSA_HIT_TYPE.CLICK_SUCCESS,{channel:w.EMPTY_STRING,refMarker:p.shareUrl.refMarker.click,refererURL:p.refererURL,shareDataAttributes:p.shareDataAttributes,treatment:p.treatment||"",weblab:p.weblab||""}));
k.isSafari()&&k.isDesktop()&&(e=P({shareData:p,channelRef:w.CP_CHANNEL_REF}),S.fetch({data:e,callback:function(a){b.logCounter("TinyUrlOnSheetOpen");H=a}}));d.trigger("ssf:event:sheetOpen",p)}});f(document).delegate(".ssf-copy,.ssf-channel.copy","click",function(a){b.logCounter("ShareClick");b.logCounter("DPX.Desktop.ChannelClick");b.logCounter(q,"ChannelClick");b.logCounterRefactor("ChannelClick",p.shareDataAttributes.ingress);a.preventDefault();var e=p;a=e.shareUrl;var l=e.shareDataAttributes,g=
e.treatment;g=g===m?"":g;var y=e.weblab;y=y===m?"":y;e=e.isBestFormatEnabled;var A=w.CP_CHANNEL_REF,z=a.refMarker.getClickForChannel(A),x={channel:w.CP_CHANNEL_REF,refMarker:z,shareDataAttributes:l,treatment:g,weblab:y},n=f(this);a.refMarker.isBestFormatEnabled=e;var N=a.getReturnForChannel(A);k.isSafari()&&k.isDesktop()?navigator.clipboard.writeText(H||N).then(function(){Z(p,x,n)},function(){ca(x)}):(a=P({shareData:p,channelRef:A}),c.showSpinner(n),S.fetch({data:a,callback:function(a){c.hideSpinner(n);
navigator.clipboard.writeText(a||N).then(function(){Z(p,x,n)},function(){ca(x)})}}));d.trigger("ssf:event:share",p)});f(document).delegate(".ssf-embed,.ssf-channel.embed","click",function(a){a.preventDefault();var c=p;a=c.shareDataAttributes;var k=c.treatment;k=k===m?"":k;var d=c.weblab;d=d===m?"":d;c={channel:"embed",refMarker:c.shareUrl.refMarker.getClickForChannel(w.EMBED_CHANNEL_REF),shareDataAttributes:a,treatment:k,weblab:d};b.logCSAEvent(w.CSA_HIT_TYPE.SHARE,c);b.logCounter("DPX.Desktop.ChannelClick");
b.logCounter(q,"ChannelClick");b.logCounter("ChannelClick.Embed");b.logCounter("ShareClick");b.logCounterRefactor("ChannelClick",a.ingress);K.create(f(".ssf-channel.embed"),p.kpModalParams).show()});t=function(){B=f(".ssf-share-trigger");E=x(B);var a=E.width;if(!f(".ssf-background").length&&E.background){var b=1.4*a;b=f('\x3cdiv class\x3d"ssf-background'+(E.floatedIcon?"-float":"")+'"\x3e\x3c/div\x3e').css({width:b,height:b});B.wrap(b)}E.icon&&B.css({height:a,width:a,backgroundImage:"url("+z()+")"})};
k.isIE()&&f(".ssf-share-trigger,.ssf-background").remove();d.on("a:popover:afterUpdatePosition:ssf-share-popover",function(a){a=a.popover.$popover;var b=a.position().left-p.popoverDistance;a.find(".a-arrow-border").css({right:24,left:""});a.css({left:b})});d.on("ssf:event:trigger-share-widget",function(a){d.trigger("a:declarative:ssf-share-icon:click",{data:a,$currentTarget:(1<arguments.length&&arguments[1]!==m?arguments[1]:m)||L})});d.on("a:popover:show:ssf-share-popover",function(){C=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded",
"true")});d.on("a:popover:hide:ssf-share-popover",function(){C=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});d.on("a:popover:show:ssf-share-modal",function(){C=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});d.on("a:popover:hide:ssf-share-modal",function(){C=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});d.on("a:sheet:beforeShow:ssf-customize-bottom-sheet",
function(a){a.sheet.$container.css("height","")});t()})()}catch(D){b.logCounter("DPX.Desktop.Error"),b.logCounter(q,"Error"),b.logLoad("Error"),b.logFatal("Error loading Share Framework AUI: "+D.toString())}finally{b.logCounter("DPX.Desktop.Render"),b.logCounter(q,"Render"),b.logLoad("Render"),d.trigger("ssf:event:load"),b.stopTimer(q)}return{init:t}});"use strict";var ba=function(){return function(d,f){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d)){var h=[],n=!0,a=!1,c=m;try{for(var g=
d[Symbol.iterator](),e;!(n=(e=g.next()).done)&&(h.push(e.value),!f||h.length!==f);n=!0);}catch(b){a=!0,c=b}finally{try{if(!n&&g["return"])g["return"]()}finally{if(a)throw c;}}return h}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();r.when("A","SocialShareWidgetConfig","SocialShareWidget").register("SocialShareWidgetTemplating",function(d,f,h){h=h.SocialShareCore;var n=d.$,a=h.Detection.isClipboardAvailable,c=h.Detection.isDesktop,g=f.excludedChannels;a()||g.push("copy");
var e=function(a){return'\x3cspan class\x3d"a-spinner a-spinner-'+a+' a-align-center aok-hidden"\x3e\x3c/span\x3e'};return{build:function(b){var d=b.shareUrl,h=b.socialLinks,v=h===m?{}:h;h=b.shareDataAttributes;var q=b.builtChannels,D=b.kpModalParams,k=b.t;v.email=b.mailToUri;var l='\x3cspan class\x3d"a-button ssf-copy"\x3e\n        \x3cspan class\x3d"a-button-inner"\x3e\n          \x3cinput class\x3d"a-button-input" type\x3d"button" aria-label\x3d"'+k.taf_copy_tooltip+'"\x3e\n          \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e\n            \x3cbutton class\x3d"a-button-text"\x3e\n              \x3cdiv class\x3d"copy-label"\x3e\n                '+
k.taf_copy_tooltip+"\n              \x3c/div\x3e\n            \x3c/button\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e\n      \x3c/span\x3e";!c()&&a()&&1>n(".ssf-feedback").length&&n(document.body).append('\x3cdiv class\x3d"a-changeover ssf-feedback" style\x3d"display:none"\x3e\n          \x3cdiv class\x3d"a-changeover-inner"\x3e\n            \x3ci class\x3d"a-icon a-icon-checkmark-inverse"\x3e\x3c/i\x3e\n            \x3cstrong class\x3d"a-size-medium"\x3e'+k.taf_copy_url_changeover+"\x3c/strong\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e");
var y=function(a){return{title:k["taf_"+a.name+"_tooltip"]||a.label,label:k["taf_"+a.name+"_name"]||a.label}};f.lineMarketplaces.includes(h.marketplaceId)||v.li?g.push("pi"):g.push("li");D||g.push("embed");f.cnMarketplace.includes(h.marketplaceId)&&g.push.apply(g,Q(f.nonCNChannels));return{getModal:function(){var b="",c=!0,x=!1,f=m;try{for(var p=Object.entries(q)[Symbol.iterator](),n;!(c=(n=p.next()).done);c=!0){var h=ba(n.value,2),u=h[0],t=h[1];if(!g.includes(u)&&"copy"!==u){var z=y(t),W=v[t.name]||
t.getSharingUrl();b+='\x3cli class\x3d"ssf-channel-h"\x3e\n              \x3ca class\x3d"ssf-channel a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+W+'" title\x3d"'+z.title+'" data-key\x3d"'+u+'"\x3e\n                '+e("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+t.image+')"\x3e\x3c/i\x3e\n              \x3c/a\x3e\n              \x3cspan\x3e'+z.label+"\x3c/span\x3e\n            \x3c/li\x3e"}}}catch(F){x=!0,f=F}finally{try{!c&&p.return&&p.return()}finally{if(x)throw f;
}}c=a()?'\x3cdiv class\x3d"ssf-copy-section a-box a-padding-base a-spacing-top-large"\x3e\n              \x3cdiv class\x3d"link-section"\x3e'+d.return+'\x3c/div\x3e\n              \x3cdiv class\x3d"copy-button"\x3e'+l+"\x3c/div\x3e\n          \x3c/div\x3e":"";return'\x3ch3 class\x3d"a-spacing-large"\x3e'+k.taf_share_bottom_sheet_title+"\x3c/h3\x3e"+('\x3cdiv class\x3d"ssf-h-icons"\x3e\x3cul class\x3d"ssf-h-icons a-nostyle"\x3e'+b+"\x3c/ul\x3e\x3c/div\x3e")+c},getPopover:function(){var a="",b=!0,c=
!1,k=m;try{for(var d=Object.entries(q)[Symbol.iterator](),l;!(b=(l=d.next()).done);b=!0){var f=ba(l.value,2),n=f[0],h=f[1];if(!g.includes(n)){var z=y(h),u=v[h.name]||h.getSharingUrl();a+='\x3cli class\x3d"ssf-channel-v"\x3e\n              \x3ca class\x3d"ssf-channel '+n+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+u+'" title\x3d"'+z.title+'" data-key\x3d"'+n+'"\x3e\n                '+e("small")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+h.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"'+
n+'-label"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n            \x3c/li\x3e"}}}catch(F){c=!0,k=F}finally{try{!b&&d.return&&d.return()}finally{if(c)throw k;}}return'\x3cul class\x3d"a-nostyle"\x3e'+a+"\x3c/ul\x3e"},getBottom:function(){var a="",b=!0,c=!1,d=m;try{for(var l=Object.entries(q)[Symbol.iterator](),n;!(b=(n=l.next()).done);b=!0){var f=ba(n.value,2),h=f[0],u=f[1];if(!g.includes(h)){var z=y(u),t=v[u.name]||u.getSharingUrl();a+='\x3cli class\x3d"ssf-channel-b a-padding-base"\x3e\n              \x3ca class\x3d"ssf-channel '+
h+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+t+'" title\x3d"'+z.title+'" data-key\x3d"'+h+'"\x3e\n                '+e("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+u.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"a-size-base-plus"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n              \x3c/li\x3e"}}}catch(F){c=!0,d=F}finally{try{!b&&l.return&&l.return()}finally{if(c)throw d;}}return'\x3cdiv class\x3d"a-padding-base ssf-header"\x3e\n          \x3ch4\x3e'+
k.taf_share_bottom_sheet_title+'\x3c/h4\x3e\n        \x3c/div\x3e\x3cdiv class\x3d"ssf-scroll"\x3e\x3cul class\x3d"a-nostyle"\x3e'+(a+"\x3c/ul\x3e")+"\x3c/ul\x3e\x3c/div\x3e"},getCustomize:function(){var a=void 0;r.now("SocialShareWidgetCustomizeTemplate").execute(function(c){a=b.customize?c.getCustomizeBox(k):""});var c='\x3ch3 class\x3d"a-spacing-base a-spacing-top-base"\x3e'+k.taf_share_bottom_sheet_title+"\x3c/h3\x3e",d='\x3cdiv class\x3d"ssf-heading-container"\x3e\x3cimg class\x3d"ssf-back-btn" src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg"\x3e'+
c+"\x3c/div\x3e",l='\x3cdiv class\x3d"a-padding-base a-box ssf-preview-container ssf-no-border" style\x3d"background-image: url('+b.image+')"\x3e'+e("medium")+"\x3c/div\x3e",g=b.caf?'\x3cdiv class\x3d"a-row a-spacing-top-large'+(b.customize?"":" a-spacing-large")+'"\x3e\n          \x3cdiv class\x3d"a-column a-span9"\x3e\n            \x3cstrong class\x3d"ssf-caf-toggle-label"\x3e'+k.taf_custshare_caf_ingress+'\x3c/strong\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"a-column a-span3 a-text-right a-span-last"\x3e\n            \x3cdiv class\x3d"a-switch-row ssf-caf-toggle"\x3e\n          \x3cinput class\x3d"a-declarative a-switch-input" data-action\x3d"a-switch-input" name\x3d"caf" type\x3d"checkbox"\x3e\n          \x3clabel class\x3d"a-switch-label a-declarative" data-action\x3d"a-switch-label"\x3e\n            \x3cdiv class\x3d"a-switch a-declarative" data-action\x3d"a-switch"\x3e\n              \x3ca class\x3d"a-switch-control" aria-label\x3d"caf" style\x3d"transform: translateX(-1px) translateZ(0px);"\x3e\x3c/a\x3e\n            \x3c/div\x3e\n          \x3c/label\x3e\n        \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e':
"",y='\x3cspan class\x3d"a-button a-button-primary a-spacing-top-small ssf-customize-share-btn"\x3e\n          \x3cspan class\x3d"a-button-inner"\x3e\n            \x3cinput class\x3d"a-button-input" type\x3d"button" aria-labelledby\x3d"ssf-customize-share-btn"\x3e\n            \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"ssf-customize-share-btn"\x3e\n              '+b.shareLabel+"\n              "+e("small")+"\n            \x3c/span\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e";
return'\x3cdiv class\x3d"a-padding-base ssf-customize-container-one"\x3e'+c+l+g+a+y+"\x3c/div\x3e"+(b.customize?'\x3cdiv class\x3d"a-padding-base ssf-customize-container-two aok-hidden"\x3e'+d+l+g+'\x3cdiv class\x3d"a-row a-spacing-top-base a-padding-base ssf-tabs"\x3e\x3c/div\x3e'+y+"\x3c/div\x3e":"")}}}}});"use strict";r.when("jQuery","SocialShareWidget","SocialShareWidgetState","SocialShareWidgetLinkUtil","SocialShareWidgetAPI").register("SocialShareWidgetTiny",function(d,f,v,n,a){f=f.SocialShareCore;
var c=f.Metrics,g=f.Constants;return{fetch:function(e){var b=e.data,f=e.isAsync,t=f===m?!0:f,C=e.callback;try{if(0<b.refMarkerId){var q=new URL(b.url),D=q.searchParams.get("ref_");D&&(D=D+"_"+b.refMarkerId,q.searchParams.set("ref_",D),b.url=q.toString())}var k=v.get("shareData");if(v.get("dpx")){var l=v.get("shareAapiCsrfToken"),y=v.get("aapiBaseUrl");if(k.isBestFormatEnabled){var A=new URL(b.url);A.searchParams.append("bestFormat","true");b.url=A.toString()}if(k.isShortTitleGatingEnabled&&""!==k.titleSource){var w=
new URL(b.url);w.searchParams.append("titleSource",k.titleSource);b.url=w.toString()}b.url=n.getLinkWithFlippedStarsLeft(b.url);"dprv"===k.refId&&(b.shareAapiCsrfToken=l,b.aapiBaseUrl=y,b.tinyUrlEnabled=!0,c.logCounter("reviews.tiny"))}var x=h.location.protocol+"//",B=b.deeplinkInfo;if(B&&B.isDisabled&&B.flag!=m){var p=new URL(b.url);p.searchParams.append("nodl",B.flag);b.url=p.toString()}if(b.isOnShareGatingEnabled)a.build(k).onShare(t,b.url,b.extractedRef,b.osType,C);else if(b.tinyUrlEnabled)if(b.aapiBaseUrl&&
b.shareAapiCsrfToken&&b.marketplaceId)(function(){var a=""+x+b.aapiBaseUrl+"/api/marketplaces/"+b.marketplaceId+"/social-share/tinyurl",k={longUrl:b.url},l={"Accept-Language":"en-US",Accept:'application/vnd.com.amazon.api+json; type\x3d"social-share.tinyurl/v1"',"x-api-csrf-token":b.shareAapiCsrfToken,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":v.get("slateToken")};c.startTimer("Tiny");d.ajax(a,{type:"POST",headers:l,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",
async:t,data:k,success:function(a){c.logCounter("Tiny.Response");c.logCounter("Desktop.Tiny.Response");c.logCounterRefactor("Tiny.Response");a.entity&&a.entity.shortUrl?(C(a.entity.shortUrl.url),c.logCounter("Tiny.Success")):(r.log("Error Generating TinyURL. with share url "+b.url,"ERROR",g.SSF_AUI_PACKAGE_ATTRIBUTION),c.logCounter("Tiny.Error"),C(b.url))},error:function(d){d&&d.status!=m&&0===d.status?c.logCounter("Tiny.Blocked"):(r.log("Error Generating TinyURL with share url "+b.url+", Error Code: "+
d.status+", Error Response: "+d.responseText+", Endpoint: "+a,"ERROR",g.SSF_AUI_PACKAGE_ATTRIBUTION),c.logCounter("Tiny.Error"),c.logCounter("Desktop.Tiny.Error"),c.logCounterRefactor("Tiny.Error"));C(b.url)},complete:function(){c.stopTimer("Tiny")}})})();else return c.logCounter("Tiny.Unavailable"),C(b.url);else return C(b.url)}catch(E){return r.log("Error generating tinyURL: "+E.toString(),"ERROR",g.SSF_AUI_PACKAGE_ATTRIBUTION),b.url}}}});"use strict";r.when("A").register("SocialShareWidgetState",
function(d){var m="social-"+h.ue_id+"-share",v={slateToken:d.$('meta[name\x3d"encrypted-slate-token"]').attr("content")||"",dpx:!1};d.state(m,v);return{getCurrent:function(){return d.state(m)},get:function(d){return this.getCurrent()[d]},getAndReset:function(d){var a=this.get(d);a&&this.set(d,null);return a},set:function(f,a){var c=this.getCurrent();d.trigger("ssf:event:state:set",c);if(!f)return c;c[f]=a;c=d.state(m,c);d.trigger("ssf:event:state:changed",c);return c}}});"use strict";r.when("jQuery",
"SocialShareWidget","SocialShareWidgetState").register("SocialShareWidgetAPI",function(d,f,v){f=f.SocialShareCore;var n=f.Constants,a=f.Metrics,c=h.location.protocol+"//",g=a.getMetricName(d,n.customize),e=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT"}),b=Object.freeze({generateImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.generate.customized.image.response/v1"',externalizeImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.externalize.customized.image.response/v1"',
fetchTabs:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.shareable.attributes.response/v1"',getWeblabTreatmentAndTrigger:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.weblab.treatment-and-trigger.response/v1"',onShare:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.on-share.response/v1"',fetchCAFID:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.consult-a-friend.feedback-request.response/v1"',
fetchHmpPollId:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.helpmepick.create-poll.response/v1"',getShortTitle:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.get-short-title.response/v1"'}),u=function(a){return(a=a.entity)&&"SUCCEEDED"===a.status?a.tabs.map(function(a){var b={id:a.id,heading:a.shortDisplayName,text:a.longDisplayName,isQuote:!0};a.params&&(b.values=Object.values(a.params)[0],b.isQuote=!1);return b}):[]};
return{build:function(f){var h=f.shareAapiCsrfToken,q=f.locale,t=f.cafAapiCsrfToken,k=f.productType,l=f.shareDataAttributes,y=l.marketplaceId,A=l.asin,w=l.ingress,x=c+f.aapiBaseUrl,B=v.get("slateToken");B||a.logCounter("slate.missing");var p=function(a){return x+"/custom/socialshareapicontracts/marketplaces/"+y+"/products/"+A+"/shareframework/"+a},E=function(a){var b=a.async;d.ajax({url:a.url,type:a.type,async:b===m?!0:b,data:a.data,headers:{"Accept-Language":q,Accept:a.accept,"x-api-csrf-token":a.cafToken||
h,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":B},xhrFields:{withCredentials:!0},success:a.success,error:a.error,complete:a.complete})};return{generateImage:function(c,d){var k=p("generatecustomizedimage");a.startTimer("GenerateCustomizeImage");E({url:k,type:e.POST,data:c,accept:b.generateImage,success:function(b){"SUCCEEDED"===b.entity.status?(a.logCounter("GenerateCustomizeImage.Success"),a.logCounter(g,"generateCustomizeImageSuccess"),a.logCounterRefactor("generateCustomizeImageSuccess",
w)):(a.logCounter("GenerateCustomizeImage.Fail"),a.logCounter(g,"generateCustomizeImageFail"),a.logCounterRefactor("generateCustomizeImageFail",w));d(b)},error:function(b){a.logCounter("GenerateCustomizeImage.Error");a.logCounter(g,"generateCustomizeImageError");a.logCounterRefactor("generateCustomizeImageError",w);a.logCounter("generateCustomizeImageError");r.log("Error generating customize image. with request URL "+k+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);
d(b)},complete:function(){a.stopTimer("GenerateCustomizeImage")}})},externalizeImage:function(c,d,k){var l=p("externalizecustomizedimage?customizedImageUrl\x3d"+c);a.startTimer("ExternalizeImage");E({url:l,type:e.PUT,accept:b.externalizeImage,async:k,success:function(a){d(a)},error:function(b){a.logCounter(g,"externalizeImageFail");a.logCounterRefactor("externalizeImageFail",w);a.logCounter("externalizeImageFail");r.log("Error externalizing image. with request URL "+l+", Error Code: "+b.status+". Error Response: "+
b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);d({})},complete:function(){a.stopTimer("ExternalizeImage")}})},fetchTabs:function(c){var d=p("productshareableattributes?locale\x3d"+q+"\x26type\x3d"+k);a.startTimer("FetchTabs");E({url:d,type:e.GET,accept:b.fetchTabs,success:function(b){a.logCounter(g,"FetchTabsSuccess");a.logCounterRefactor("FetchTabsSuccess",w);c(u(b))},error:function(b){a.logCounter(g,"FetchTabsFail");a.logCounterRefactor("FetchTabsFail",w);a.logCounter("FetchTabsFail");r.log("Error Fetching customize share tabs. with request URL "+
d+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);c([])},complete:function(){a.stopTimer("FetchTabs")}})},fetchCAFID:function(c){var d=1<arguments.length&&arguments[1]!==m?arguments[1]:!0,k=x+"/custom/consultafriendcontracts/marketplaces/"+y+"/consultafriend/feedback-request/"+A;a.logCounter(g,"CAF.createCAFID.called");a.logCounterRefactor("CAF.createCAFID.called",w);a.startTimer("CafIdGeneration");E({url:k,type:e.POST,accept:b.fetchCAFID,async:d,
cafToken:t,success:function(a){c(a.entity&&a.entity.cafId,A,f.url)},error:function(b){a.logCounter(g,"CAF.createCAFID.failed");a.logCounterRefactor("CAF.createCAFID.failed",w);r.log("Error Creating CAF Id. with request URL "+k+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);c()},complete:function(){a.stopTimer("CafIdGeneration")}})},fetchHmpPollId:function(c){var k=1<arguments.length&&arguments[1]!==m?arguments[1]:!0,l=f.hmpAapiCsrfToken,g=d.param(f.hmpState,
!0),q=x+"/custom/consultafriendcontracts/marketplaces/"+y+"/helpmepick/poll?"+g;a.logCounter("HMP.fetchHmpPollId.called."+w);a.startTimer("HmpIdGeneration");E({url:q,type:e.POST,accept:b.fetchHmpPollId,async:k,cafToken:l,success:function(a){c(a.entity&&a.entity.cafId)},error:function(b){a.logCounter("HMP.fetchHmpPollId.failed."+w);r.log("Error Fetching Poll Id. with request URL "+q+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);c()},complete:function(){a.stopTimer("HmpIdGeneration")}})},
getWeblabTreatmentAndTrigger:function(c,d,k){var l=x+"/custom/socialshareapicontracts/marketplaces/"+y+"/weblab/get-weblab-treatment-and-record?name\x3d"+d;a.startTimer("GetWeblabTreatmentAndTriggerMetric");E({url:l,type:e.GET,accept:b.getWeblabTreatmentAndTrigger,async:c,success:function(b){a.logCounter("GetWeblabTreatmentAndRecordSuccess");k(b)},error:function(b){a.logCounter("GetWeblabTreatmentAndRecordFail");r.log("Error calling weblab treatment and trigger. with request URL "+l+", Error Code: "+
b.status+". Error Response: "+b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);k([])},complete:function(){a.stopTimer("GetWeblabTreatmentAndTriggerMetric")}})},onShare:function(c,d,k,l,g){var f=x+"/custom/socialshareapicontracts/marketplaces/"+y+"/products/"+A+"/shareframework/onshare";a.startTimer("onShare");E({url:f,type:e.POST,accept:b.onShare,async:c,data:{longUrl:d,channel:k,osType:l},success:function(b){"SUCCEEDED"===b.entity.status?(g(b.entity.shortUrl.url),a.logCounter("OnShare.Success")):
(r.log("The request was sent successfully, but the response status indicates a failure with request URL "+d,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("OnShare.Failure"),g(d))},error:function(b){a.logCounter("OnShare.Error");r.log("Error calling on share. with request URL "+d,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);g([])},complete:function(){a.stopTimer("onShare")}})},getShortTitle:function(c,d){var k=x+"/custom/socialshareapicontracts/marketplaces/"+y+"/products/"+A+"/shareframework/getshorttitle",
l=c?"Async":"Sync";a.startTimer("GetShortTitle-"+l);E({url:k,type:e.GET,accept:b.getShortTitle,async:c,success:function(b){"SUCCEEDED"===b.entity.status?(a.logCounter("GetShortTitle.Success"),d(b.entity)):(r.log("The request was sent successfully, but the response status indicates a failure","ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("GetShortTitle.Failure"),d([]))},error:function(b){a.logCounter("GetShortTitle.Error");r.log("Error calling get short title. with request URL "+k+", Error Code: "+
b.status+". Error Response: "+b.responseText,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION);d([])},complete:function(){a.stopTimer("GetShortTitle-"+l)}})}}}}});"use strict";r.when("A","SocialShareWidget").register("SocialShareWidgetCustomShareOptionsTemplate",function(d,f){var h=d.capabilities.rtl;f=f.SocialShareCore.Detection;var n=f.isClipboardAvailable,a=f.isAndroid(),c=void 0,g=d.constants.HIDE_CLASS;r.when("mash").execute(function(a){return c=a});var e=function(){c||r.now("mash").execute(function(a){return c=
a});return c},b=function(a,b,c){if(0===a.length||!b&&!e())return c([]);var d=a.length,k=[];b?(a.forEach(function(a){k[a.label.toLowerCase()]=a}),c(k)):a.forEach(function(a){u(a,function(a,b){d--;b&&(k[a.label.toLowerCase()]=a);(3<=k.length||0>=d)&&c(k)})})},u=function(b,c){var d="whatsapp"===b.label.toLowerCase()&&a;e().canLaunchIntentURL({url:b.schemeURI,successCallback:function(a){if(d)return c(b,!0);c(b,a)},failCallback:function(){if(d)return c(b,!0);c(b,!1)}})},t=function(a){var b=1<arguments.length&&
arguments[1]!==m?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'" /\x3e'},C=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==m?arguments[0]:"")+"\x3c/span\x3e"};return{getChannelsHtml:function(c,f){var k="";b(c.customShareOptions,c.isMWebCustomShare,function(b){b=d.extend(b,c.defaultCustomShareOptions);c.customShareBuiltChannels=b;var l=Object.keys(b);
if(0===l.length)throw Error("Fallback to Native Sheet: channel key list is empty.");if(c.isMWebCustomShare&&(a&&navigator&&n()||!a)){var h=l.indexOf("copy");-1!==h&&(l.splice(h,1),l.splice(2,0,"copy"))}for(h=0;h<l.length;h++){var w=l[h],x=a&&"copy"===w&&!(navigator&&n()),q="more"===w&&!(e()||c.isMWebCustomShare);if(!x&&!q){x=k;q=c;var p=b[w];w=p.stringId;var u=p.className,v=p.label;p="https://m.media-amazon.com/images/G/01/share-icons/"+p.image;q='\x3cli class\x3d"ssf-custom-share-option '+(u===m?
"":u)+'"  data-name\x3d"'+v.toLowerCase()+'"\x3e\n                    \x3cdiv class\x3d"ssf-custom-share-spinner" role\x3d"button" tabindex\x3d"0"\x3e\n                        '+('\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center '+g+'"\x3e\x3c/span\x3e')+'\n                        \x3cimg src\x3d"'+p+'" title\x3d"'+v+'" aria-label\x3d"'+v+'"/\x3e\n                    \x3c/div\x3e\n                    \x3cspan class\x3d"label a-size-small"\x3e'+(q.t[w]||v)+"\x3c/span\x3e\n                 \x3c/li\x3e";
k=x+q}}f('\n                    \x3cdiv class\x3d"ssf-custom-channels-container a-color-base-background"\x3e\n                        \x3cul class\x3d"ssf-custom-share-options-container a-unordered-list a-nostyle"\x3e\n                            '+k+"\n                        \x3c/ul\x3e\n                    \x3c/div\x3e\n                ")})},getPreviewImage:function(a){var b=a.starRating,c=a.numberOfReviews,d=h?"r":"";a='\x3cdiv class\x3d"ssf-cso-p-image ssf-regular"\x3e'+t(a.productImage,"ssf-regular")+
"\x3c/div\x3e";b=b?t("RIO"+b+d+".png","ssf-caf-stars"):"";c=C(c);return'\x3cdiv class\x3d"ssf-cso-p-image"\x3e'+a+('\x3cdiv class\x3d"ssf-cso-stickers ssf-regular"\x3e'+b+c+"\x3c/div\x3e")+"\x3c/div\x3e"},getErrorAlert:function(a){return'\x3cdiv class\x3d"ssf-error-text a-row '+g+'"\x3e\n          \x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error" role\x3d"alert"\x3e\n              \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                  \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                  \x3cdiv class\x3d"a-alert-content"\x3e\n                    \x3cspan class\x3d"ssf-error-generic '+
g+'"\x3e'+a.taf_custshare_channel_error_generic+'\x3c/span\x3e\n                    \x3cspan class\x3d"ssf-error-email '+g+'"\x3e'+a.taf_custshare_channel_error_email+"\x3c/span\x3e\n                  \x3c/div\x3e\n              \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e"},getAvailableChannels:b}});"use strict";var X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==
Symbol.prototype?"symbol":typeof d};r.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomShareOptions",function(d,f,v,n){var a=d.$;f=f.SocialShareCore;var c=f.ShareSheet,g=f.Metrics,e=f.Constants,b=void 0,u=void 0,t=void 0,C=void 0,q=!1,D=d.constants.HIDE_CLASS;r.when("mash").execute(function(a){u=a});r.when("SocialShareWidgetTiny").execute(function(a){b=a});r.when("SocialShareWidgetCustomizeUtils").execute(function(a){t=a});r.when("SocialShareWidgetCAFUtils").execute(function(a){C=
a});return{init:function(k,l,f,A,w,x){var y=k.customShareBuiltChannels;l=k.isCustomShareOptionsSheetEnabled;var p=l===m?!1:l;l=k.isFallbackShareUrlEnabled;var v=l===m?!1:l;l=k.caf;var H=l===m?!1:l,R=k.shareDataAttributes;l=k.treatment;var L=l===m?"":l;l=k.weblab;var z=l===m?"":l;l=k.refererURL;var W=l===m?"":l;d.on("ssf:event:caf-switch-change",function(a){q=a});var F=function(a){a.addClass("ssf-noclick");a.find(".a-spinner").removeClass(D)},I=function(a){a.removeClass("ssf-noclick");a.find(".a-spinner").addClass(D)},
K=function(){return q?(k.t["taf-share-caf-messageprefix"]||"")+" "+k.title:k.title},M=function(a,c,d){q?C.prepareShareUrl(k,a,b,c,function(a,b){return d(a,b)}):k&&k.isHmpShareSheet?C.prepareHmpShareUrl(k,a,b,c,function(a,b){return d(a,b)}):t.prepareShareUrl(k,a,b,c,function(a){return d(a)})},U=function(a){a&&d.trigger("ssf:event:caf-share-complete-success",k)},V=function(){u.dispatchEvent({type:"axf:consultAFriend:shareCompletedSuccessfully",detail:{isHmp:!0}})},S=function(a,b,c,l){try{var g=encodeURIComponent(l+
" \n "+c);return"Messages"===b?d.capabilities.ios?"sms:///\x26body\x3d"+g:"mms:?\x26body\x3d"+g:"Email"===b?a=a.replace("\x26url\x3d{url}","").replace("{subject}",encodeURIComponent(k.emailSubject)).replace("{body}",""+g):"whatsApp"===b?a=a.replace("{url}",""+g):a=a.replace("{text}",encodeURIComponent(l)).replace("{url}",encodeURIComponent(c)).replace("{titleAndURL}",encodeURIComponent(g))}catch(aa){return r.log("Failed to generate shareUrl, error: "+aa.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION),
a}},T=function(a){q?(g.logCounter("Caf.customShareOptions.ChannelClick."+a),g.logCounter("CAF.edIngress.ChannelClick."+a+"."+k.cafIngressTreatment)):t.imageState.isEmpty()?g.logCounter("CustomShareOptions.ChannelClick."+a):g.logCounter("Books.customShareOptions.ChannelClick."+a)},G=function(){var a=0<arguments.length&&arguments[0]!==m?arguments[0]:"";a=0<a.length?"."+a:"";return q?""+e.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC+a:t.imageState.isEmpty()?""+e.CUSTOM_SHEET_CLICK_LATENCY_METRIC+a:""+e.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC+
a},Y=function(){var a=G();g.startTimer(a);M(e.EMPTY_STRING,!k.isMWebCustomShare,function(b){var l=1<arguments.length&&arguments[1]!==m?arguments[1]:"";k.tinyUrl=b;var e=k;l&&(e=d.extend({channelSelectCB:function(){U(l)},cafSwitchEnabled:q},k),e.title=K());k&&k.isHmpShareSheet&&(e=d.extend({channelSelectCB:function(){V()}},k),e.title=K());(new c(e)).launch(function(){g.logCounter("customShareOptions.SheetOpen")});g.stopTimer(a)})},O=function(a,b){var c=n.getAndReset(e.customizeShareStateKey);return{channel:a,
refMarker:b,refererURL:W,shareDataAttributes:R,treatment:L,weblab:z,isCustomShareOptionsSheetEnabled:p,caf:H,cafSwitchEnabled:q,customizeShareCSAData:c,cafIngressTreatment:k.cafIngressTreatment}};a(".custom-share-native-sheet").unbind("click").click(function(a){try{T("more"),f(),Y()}catch(Z){r.log('Failed to launch native share sheet via "More" button, error: '+Z.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION)}});var J=function(a){return a&&"keyup"===a.type&&!(13===a.keyCode||32===a.keyCode)};l=
function(b){var c=this;try{var d=function(){if(J(b))return{v:void 0};var d=G();g.startTimer(d);T("copy");var l=e.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF,h=a(c);F(h);M(l,!1,function(b){var c=1<arguments.length&&arguments[1]!==m?arguments[1]:"";navigator.clipboard.writeText(b).then(function(){var b=k.shareUrl.refMarker.getClickForChannel(l);g.logCSAEvent(e.CSA_HIT_TYPE.SHARE,O("copy",b));q?g.logCounter("Caf.CustomShareOptions.CopySuccess"):t.imageState.isEmpty()?g.logCounter("customShareOptions.CopySuccess"):
g.logCounter("Books.CustomShareOptions.CopySuccess");a(".ssf-feedback").show();I(h);f();g.stopTimer(d);c&&U(c);k&&k.isHmpShareSheet&&V()},function(){g.stopTimer(d);q?g.logCounter("Caf.CustomShareOptions.CopyFail"):t.imageState.isEmpty()?g.logCounter("CustomShareOptions.CopyFail"):g.logCounter("Books.CustomShareOptions.CopyFail");x({shareData:k,channelRef:l,caf:H,cafSwitchEnabled:q});I(h)})})}();if("object"===("undefined"===typeof d?"undefined":X(d)))return d.v}catch(P){r.log("Failed to share using copy channel, error: "+
P.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION)}};a(".custom-share-copy").unbind("click").click(l);a(".custom-share-copy").unbind("keyup").keyup(l);l=function(b){var c=this;try{var l=function(){if(J(b))return{v:void 0};var l=a(c),p=l.data("name"),n=G(),x=G(p);g.startTimer(n);g.startTimer(x);var w=y[p],A=e.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_"+w.ref,z=k.shareUrl.refMarker.getClickForChannel(A);a(".ssf-error-text").addClass(D);F(l);M(A,!0,function(a){var b=1<arguments.length&&arguments[1]!==m?arguments[1]:
"",c=S(w.shareUrl,w.label,a,K());u?u.launchIntentURL({url:c,successCallback:function(){g.stopTimer(n);g.stopTimer(x);I(l);f();g.logCounterRefactor("ChannelClick",R.ingress);g.logCounter("ChannelClick");T(p);b&&U(b);k&&k.isHmpShareSheet&&V();g.logCSAEvent(e.CSA_HIT_TYPE.SHARE,O(p,z))},failCallback:function(b){r.log("Failed to launch intent URL "+c+" with error code: "+b.code,"WARN",e.SSF_AUI_PACKAGE_ATTRIBUTION);g.logCounter("customShareOptions.LaunchShareIntentFail");I(l);g.stopTimer(n);g.stopTimer(x);
v&&w.fallbackShareUrl?(g.logCSAEvent(e.CSA_HIT_TYPE.SHARE,O(p,z)),h.location=S(w.fallbackShareUrl,w.label,a,K())):(f(),Y())}}):(I(l),g.logCSAEvent(e.CSA_HIT_TYPE.SHARE,O(p,z)),f(),k.isMWebCustomShare?(g.stopTimer(n),g.stopTimer(x),g.logCounterRefactor("ChannelClick",R.ingress),g.logCounter("ChannelClick"),T(p),d.capabilities.ios?h.open(c,"_top"):h.open(c,"_blank")):h.open(c,"_blank"))})}();if("object"===("undefined"===typeof l?"undefined":X(l)))return l.v}catch(P){r.log("Failed to share, error: "+
P.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION)}};a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").unbind("click");a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").unbind("keyup");a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").click(l);a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").keyup(l)}}});"use strict";r.when("A","SocialShareWidgetState","atf").execute(function(d,
f){var h=d.$("#ssf-primary-widget-desktop");d=d.$("#ssf-share-action");h=h.data("ssfShareIcon")||d.data("ssfShareIcon")||{};f.set("shareAapiCsrfToken",h.shareAapiCsrfToken);f.set("aapiBaseUrl",h.aapiBaseUrl);f.set("dpx",!0)});"use strict";r.when("A","SocialShareWidget").execute(function(d,f){var h=void 0,m=f.SocialShareCore.Metrics;f=d.debounce(function(){clearTimeout(h)},200,!0);d.declarative("ssf-share-icon","touchstart",function(){h=setTimeout(function(){m.logCounter("longpress")},500)});d.declarative("ssf-share-icon",
"touchmove touchend",f)});"use strict";r.when("A","SocialShareWidget").register("SocialShareWidgetMetrics",function(d,f){var h=f.SocialShareCore.Metrics,n=function(a){a=a.pathname.split("/").filter(function(a){return d.contains(a,"ref\x3d")});return(a.length?a[0]:"").replace("ref\x3d","")},a=function(a){return(a=a.match(/cm_sw_r_(?:cso_)?(.*?)_/))?a[1]:m};r.now("SocialShareWidgetLoadedBTF").execute(function(a){a?h.logCounter("btf:render"):h.logCounter("atf:render")});r.when("atf").execute(function(){try{var c=
d.capabilities,g=c.tablet;c.isIE&&h.logCounter("render.ie");(g||600<screen.width&&c.isAmazonApp)&&h.logCounter("render.tablet");var e=new URL(location.href);if(e.href.includes("cm_sw_r_")){var b=e.searchParams.get("ref")||e.searchParams.get("ref_");b||(b=n(e));if(b.startsWith("cm_sw_r_")){var f=a(b);f&&h.logCounter("return.visit."+f);h.logCounter("return.visit")}}e.searchParams.get("cafId")&&h.logCounter("CAF.cafDeepLink")}catch(t){h.logCounter("urlparam.issue")}});return{getRefEq:n,getChannelFromRef:a}});
"use strict";r.register("SocialShareWidgetLinkUtil",function(){return{getLinkWithFlippedStarsLeft:function(d){try{var h=new URL(d.href||d),m=h.searchParams;if(m.get("ref_")&&m.get("starsLeft")){var n=m.get("ref_"),a=m.get("starsLeft"),c=m.get("newPreview"),g=m.get("bestFormat"),e=m.get("language"),b=m.get("titleSource");m.delete("ref_");m.delete("starsLeft");m.delete("newPreview");m.delete("bestFormat");m.delete("language");m.delete("titleSource");h.searchParams.append("ref_",n);h.searchParams.append("starsLeft",
a);c&&h.searchParams.append("newPreview",c);g&&h.searchParams.append("bestFormat",g);e&&h.searchParams.append("language",e);b&&h.searchParams.append("titleSource",b)}return h.toString()}catch(u){return d.toString()}}}});"use strict";r.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetCustomizeUtils","SocialShareWidgetOnShareUtils").register("SocialShareWidgetCustomize",function(d,f,v,n,a){f=f.SocialShareCore;var c=d.$,g=f.ShareSheet,e=f.Url,b=f.Metrics,u=f.Constants,t=b.getMetricName(c,
u.customize),C=d.constants.HIDE_CLASS,q=function(){},D,k=0,l=void 0,y=void 0,A=void 0,w=!1;r.when("a-checkbox").execute(function(a){return y=a});r.when("a-button").execute(function(a){return l=a});try{(function(){var f=n.imageState;d.declarative("cafCheckboxAction","change",function(){A()});d.on(n.getEventName("Hide"),function(a){a.sheet.getContentContainer().remove();f.clear()});d.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(a){L(a.sheet)});var B=function(a,k,l){var e=c(".ssf-preview-container"),
g=c(".ssf-caf-preview"),h=(D=k)?"CAF.switchOn":"CAF.switchOff";b.logCounter(t,h);b.logCounterRefactor(h,l);d.trigger("ssf:event:caf-switch-change",k);f.isConsultAFriendPreview=k;l=n.getImageData(a,f);w?n.getBackendPreviewImage(a,l,function(b){b?H(b):d.trigger("ssf:event:preview-generation-failed",a)}):k?(g.fadeIn(100),e.hide()):(e.fadeIn(100),g.hide())},p=function(b){var c=b.shareData,d=b.channelRef,l=c.shareUrl;b=c.isOnShareGatingEnabled;b=b===m?!1:b;var e=c.aapiBaseUrl;e=e===m?"":e;var g=c.shareAapiCsrfToken;
g=g===m?"":g;var h=c.tinyUrlEnabled;h=h===m?!1:h;var f=c.deeplinkInfo;f=f===m?{}:f;var p=c.shareDataAttributes,y=c.storeId;y=y===m?"":y;l.refMarker.isBestFormatEnabled=c.isBestFormatEnabled;l=d?l.getReturnForChannel(d):l.return;d=a.getChannelName(d);var n=a.getOsType();p=p.marketplaceId;return{tinyUrlEnabled:h,aapiBaseUrl:e,shareAapiCsrfToken:g,marketplaceId:p===m?"":p,url:l,isOnShareGatingEnabled:b,extractedRef:d,osType:n,originalUrl:c.url||l,refMarkerId:k++,deeplinkInfo:f,storeId:y}},E=function(a,
k,f,y,n,w,A){var q=f.shareDataAttributes,x=f.url,z=q.asin,B=q.ingress;q=f.refId;c(".ssf-customize-share-btn").find(".a-spinner").addClass(C);l(".ssf-customize-share-btn").enable();k();var v=!1;k=new URL(w===m?x:w);y&&(q=u.CAF_REF_PREFIX+"_"+q,k.searchParams.append("cafId",y),k.searchParams.append("cafASIN",n),n!==z&&b.logCounter(t,"CAF.ShareASINMismatch"),v=!0);k.searchParams.append("language",h.languageOfPreference||f.locale||"en_US");f.shareUrl=new e(k.toString(),q);var E=p({shareData:f});r.when("SocialShareWidgetTiny").execute(function(c){c.fetch({data:E,
callback:function(c){f.tinyUrl=c;A&&A();c=d.extend({channelSelectCB:function(){y&&d.trigger("ssf:event:caf-share-complete-success",f)},cafSwitchEnabled:v},f);(new g(c)).launch(function(){d.delay(function(b){a(f)},100);y?(b.logCounter(t,"CAF.ShareSheetOpen"),b.logCounterRefactor("CAF.ShareSheetOpen",B)):(b.logCounter(t,"ShareSheetOpen"),b.logCounterRefactor("ShareSheetOpen",B))})}})})},H=function(a){if(!(1<arguments.length&&arguments[1]!==m&&arguments[1])){var b=new Image;b.src=a;b.onload=function(){f.productImageProperties.width=
this.width;f.productImageProperties.height=this.height}}},R=function(a){a=a.popularHighlightStrings;var b=[];b.push({id:"BackgroundImageTab",physicalId:"417kcYISTOL.jpg",url:"https://m.media-amazon.com/images/I/417kcYISTOL.jpg"});a.length&&(defaultQuote=a[0].replace(/"|”|“/g,""),b.push({id:"BookQuotesTab",value:defaultQuote}));return b},L=function(a){var c=a.$contentContainer,d=parseInt(a.$container.css("max-height"));c=parseInt(c.height());d<c?(a.$contentContainer.css("height",d),b.logCounter("SmallDevice")):
a.$contentContainer.css("height","auto")};q=function(a,k,e,g){var h=a.shareDataAttributes,p=a.treatment,q=p===m?"":p;p=a.weblab;var x=p===m?"":p;p=a.caf;p=p===m?!1:p;var z=a.isCafPreviewGenerationMigrationEnabled,F=h.ingress;f.currentPreview=n.getRegularImage();D=a.cafSwitch;p&&z&&(w=!0);p=function(a,b){0<b.length&&b.forEach(function(a){f.set(a)})};var G=function(a){b.logCounter(t,a);b.logCounterRefactor(a,F);b.logCounter(a)},I=function(a,b){v.build(a).fetchTabs(function(d){r.now("SocialShareWidgetCustomizeTemplate").execute(function(k){c(".ssf-tabs").html(k.getTabs(a,
d));b(d)})})};A=function(){var b=y(".ssf-caf-toggle");B(a,b.isChecked(),F)};a.customize&&a.customizePreSelected?(z=R(a),f.defaultCustomizationOptions=z,p(a,z),p=n.getImageData(a,f),n.getBackendPreviewImage(a,p,function(a){f.currentImage=a;H(a);n.adjustPreviewHeight();L(g)})):w?(p=n.getImageData(a,f),n.getBackendPreviewImage(a,p,function(b){b?H(b):d.trigger("ssf:event:preview-generation-failed",a)})):B(a,D,F);c(".ssf-customize-share-btn").click(function(){l(".ssf-customize-share-btn").isEnabled()&&
(c(".ssf-customize-share-btn").find(".a-spinner").removeClass(C),l(".ssf-customize-share-btn").disable(),D?(G("CAF.shareClick"),b.startTimer("CAF.fetchCAFAndTinyURL"),a.title=(a.t["taf-share-caf-messageprefix"]||"")+" "+a.title,v.build(a).fetchCAFID(function(c,d,l){E(k,e,a,c,d,l,function(){b.stopTimer("CAF.fetchCAFAndTinyURL")})})):(G("shareClick"),b.logCSAEvent(u.CSA_HIT_TYPE.CUSTOMIZE_SHARE,{channel:u.EMPTY_STRING,refMarker:a.shareUrl.refMarker.click,shareDataAttributes:h,treatment:q,weblab:x}),
E(k,e,a)))});c(".ssf-caf-toggle-ed-ingress").click(function(){G("CAF.edIngressTapped"+a.cafIngressTreatment);n.transitionToCAFEducationPage();L(g)});c(".ssf-customize-icon").click(function(){l(this).isEnabled()&&(G("CustomizeButtonClick"),l(this).disable(),f.currentPreview=n.getCustomizeImage(),I(a,function(b){b.forEach(function(a){var b="input[type\x3dradio][name\x3d"+a.id+"]";c(b).change(function(a){a=JSON.parse(a.target.value);O(a);c(b).unbind("click");c(this).one("click",function(a){a=a.target;
a.checked=!1;a=JSON.parse(a.value);J(a)})})});a.customizePreSelected&&(c("#BackgroundImageTab1").trigger("click"),c("#BookQuotesTab0").trigger("click"));b=n.getImageData(a,f);n.getBackendPreviewImage(a,b,function(a){f.currentImage=a;n.transitionToCustomizePage();n.adjustCustomizedPreviewHeight();L(g);H(a)})}))});c(".ssf-customize-edit-poll-btn").click(function(){l(this).isEnabled()&&(l(this).disable(),d.trigger("ssf-edit-your-poll-trigger",a.hmpState),G("HMP.EditYourPoll.Clicked"),e())});var O=function(b){n.setImage();
Array.isArray(b)?b.forEach(function(a){f.set(a)}):f.set(b);var c=n.getImageData(a,f);G(b.id+"Select");n.getBackendPreviewImage(a,c,function(a){f.currentImage=a;H(a)})},J=function(b){n.setImage();G(b.id+"Unselect");f.unset(b);b=n.getImageData(a,f);n.getBackendPreviewImage(a,b,function(a){f.currentImage=a;H(a)})};c(".ssf-back-btn").click(function(){n.isCAFEducationPageVisible()&&G("CAF.edBackTapped"+a.cafIngressTreatment);f.currentPreview=n.getRegularImage();b.logCounter("BackButtonClick");n.resetPreviewState(f);
n.transitionToDefaultPage();L(g)});r.when("a-checkbox").execute(function(a){c(".ssf-caf-toggle-label").click(function(){var b=a(".ssf-caf-toggle");b.check(!b.isChecked())})});d.on("ssf:event:preview-generation-failed",function(a){w=!1;c(".ssf-backend-preview").addClass(C);c(".ssf-html-preview").removeClass(C);B(a,D,F)})}})()}catch(x){b.logCounter(t,"Error"),b.logLoad("Error"),b.logFatal("Error loading Customize widget, Share Framework AUI: "+x.toString())}finally{b.logCounter(t,"Render"),b.logLoad("Render")}return{init:q}});
"use strict";r.when("A","SocialShareWidget").register("SocialShareWidgetCustomizeTemplate",function(d,f){f=f.SocialShareCore;var h=d.capabilities.rtl,n=f.Constants,a=f.ToolBelt,c=function(a){var b=1<arguments.length&&arguments[1]!==m?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'"/\x3e'},g=function(a){var b=1<arguments.length&&arguments[1]!==m?arguments[1]:"ssf-product-title-text";d.on("a:sheet:afterShow:ssf-customize-bottom-sheet",
function(){d.$(".ssf-title-label").text(a.title)});return'\x3cdiv class\x3d"a-color-secondary a-padding-small '+b+'"\x3e\n      \x3cspan class\x3d"ssf-title-label" id\x3d"ssf-title-label"\x3e\n        \x3c!-- TITLE  --\x3e\n      \x3c/span\x3e\n    \x3c/div\x3e'},e=function(a){return'\x3cdiv class\x3d"ssf-product-preview"\x3e'+b(a.productImage,"","","ssf-title-label")+"\x3c/div\x3e"},b=function(a){var b=1<arguments.length&&arguments[1]!==m?arguments[1]:"",d=2<arguments.length&&arguments[2]!==m?arguments[2]:
"",k=3<arguments.length&&arguments[3]!==m?arguments[3]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return d||k?'\x3cimg class\x3d"'+b+'" '+(k?'aria-labelledby\x3d"'+k+'"':"")+" "+(d?'aria-label\x3d"'+d+'"':"")+' src\x3d"'+a+'"/\x3e':c(a,b)},u=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==m?arguments[0]:"")+"\x3c/span\x3e"},t=function(a){return'\x3cul class\x3d"ssf-options-box-container a-unordered-list a-nostyle"\x3e'+
a.values.map(function(b,c){var k=d.extend(b,{id:a.id}),l={id:a.id,position:c,val:k,background:b.url};a.isQuote&&(l=d.extend(l,{center:!0,width:150,content:k.displayText,background:m}));k=l.id;c=l.position;b=l.content;b=b===m?"":b;var e=l.width,g=e===m?100:e,f=l.background;e=l.center;e=e===m?!1:e;l=l.val;g='style\x3d"width: '+g+"px;background-image: url("+(f===m?"":f)+");background-size: "+g+"px "+g+'px;"';f=JSON.stringify(l);c=k+c;l=l.label||"";var h='\x3cspan class\x3d"aok-offscreen"\x3e'+l+"\x3c/span\x3e";
e&&(h='\x3cspan class\x3d"a-box-inner a-text-center ssf-q-text"\x3e'+b+"\x3c/span\x3e");return'\x3cli class\x3d"ssf-options-box" aria-label\x3d\''+l+"'\x3e\n              \x3cinput id\x3d\""+c+'" type\x3d"radio" name\x3d"'+k+"\" value\x3d'"+f+"' aria-label\x3d'"+l+"'\x3e\x3c/input\x3e\n              \x3clabel for\x3d\""+c+'" class\x3d"a-box a-text-normal" '+g+"\x3e"+h+"\x3c/label\x3e\n            \x3c/li\x3e"}).join("")+"\x3c/ul\x3e"},r=function(a){var b=1<arguments.length&&arguments[1]!==m?arguments[1]:
"",c=2<arguments.length&&arguments[2]!==m?arguments[2]:!1;return'\x3cli class\x3d"a-tab-heading ssf-customize-tab '+(c?"a-active":"")+'" data-a-tab-name\x3d"ssf-tab-'+a+'" role\x3d"presentation"\x3e\n              \x3ca aria-label\x3d"'+b+'" href\x3d"#" role\x3d"tab" aria-selected\x3d"'+(c?"true":"false")+'" '+(c?"":'tabindex\x3d"-1"')+"\x3e"+b+"\x3c/a\x3e\n            \x3c/li\x3e"},q=function(a){return'\x3cdiv data-a-name\x3d"ssf-tab-'+a+'" class\x3d"ssf-tab-'+a+" a-box a-box-tab a-tab-content "+
(3<arguments.length&&arguments[3]!==m&&arguments[3]?"":"a-hidden")+' a-padding-mini" role\x3d"tabpanel" tabindex\x3d"0"\x3e\n              '+(1<arguments.length&&arguments[1]!==m?arguments[1]:"")+"\n            \x3c/div\x3e"},D=function(){return(0<arguments.length&&arguments[0]!==m?arguments[0]:[]).map(function(a){a=a.replace(/"|”|“/g,"");return{displayText:"“"+a+"”",value:a}})};return{getTabs:function(a,b){var c=a.popularHighlightStrings;if(!b.length)return"";var d="",l="",k=-1;b.forEach(function(a,
b){a.isQuote&&(a.values=D(c));if(!a.values.length)return"";-1===k&&(k=b);b=b===k;d+=r(a.id,a.heading,b);l+=q(a.id,t(a),a.text,b)});return'\x3cdiv class\x3d"a-tab-container a-size-small"\x3e'+('\x3cul data-action\x3d"a-tabs" class\x3d"a-tabs a-declarative ssf-customize-tab a-spacing-small" role\x3d"tablist" data-a-tabs\x3d\'{"name": "customize-tabs"}\'\x3e\n        '+d+"\x3c/ul\x3e"+l)+"\x3c/div\x3e"},getCustomizeBox:function(a){return'\x3cdiv class\x3d"a-box a-color-alternate-background a-spacing-top-large a-padding-base ssf-customize-box"\x3e\n      '+
('\x3ch5 class\x3d"a-size-small a-spacing-micro"\x3e'+a.taf_custshare_customizelong+"\x3c/h5\x3e")+('\x3cp class\x3d"a-size-small a-color-secondary"\x3e'+a.taf_custshare_customizedesc+"\x3c/p\x3e")+('\x3cspan class\x3d"a-button a-button-small" id\x3d"ssf-customize-share"\x3e\n      \x3cspan class\x3d"a-button-inner"\x3e\n        \x3cbutton class\x3d"a-button-text" type\x3d"button"\x3e'+a.taf_custshare_customizeshort+"\x3c/button\x3e\n      \x3c/span\x3e\n    \x3c/span\x3e")+"\n    \x3c/div\x3e"},
getBackArrow:function(a){a=a["taf-share-general-gobacktopage"]||"";return'\x3cbutton type\x3d"button" class\x3d"ssf-back-btn a-padding-small" aria-label\x3d"'+a+'" tabindex\x3d"0"\x3e'+('\x3cimg src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg" alt\x3d"'+a+'"\x3e')+"\x3c/button\x3e"},tabsContainer:'\x3cdiv class\x3d"a-row a-spacing-top-micro ssf-tabs a-color-base-background a-padding-mini"\x3e\x3c/div\x3e',getImageSection:function(a){var d=g(a);var k=a.isCafPreviewGenerationMigrationEnabled;
var f=a.customize,n=a.customizePreSelected;k=a.caf&&k?!0:f&&n?!0:!1;f=a.customize;n=!a.productImage.match(/\.gif$/i);f='\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n      '+(f&&n?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+c("customize")+"\x3c/span\x3e":"")+'\n      \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n    \x3c/div\x3e';k='\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n              \x3cdiv class\x3d"ssf-backend-preview '+
(k?"":"aok-hidden")+'"\x3e'+f+'\x3c/div\x3e\n              \x3cdiv class\x3d"ssf-html-preview '+(k?"aok-hidden":"")+'"\x3e';var q=a.customize,t=a.productImage;n=a.t;f=e({productImage:t});var p=a.starRating,r=p===m?"ZERO":p;p=a.customize;p=p===m?!1:p;var v=a.numberOfReviews,C=a.caf,D=a.isUnrecognizedUsersRichPreviewEnabled;a=a.isMWebCustomShareRichPreviewEnabledOverride;r=b("RIO"+r+(h?"r":"")+".png","ssf-caf-stars",r+" star rating");v=u(v);a='\x3cdiv class\x3d"ssf-caf-rating"\x3e\n              \x3cdiv class\x3d"'+
(C||D||p||a?"ssf-caf-rating-left":"ssf-caf-rating-right")+'"\x3e\n                '+r+v+"\n              \x3c/div\x3e\n            \x3c/div\x3e";t=!t.match(/\.gif$/i);q=q&&t?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+c("customize")+"\x3c/span\x3e":"";n='\x3cp class\x3d"a-size-base a-spacing-micro ssf-caf-text"\x3e'+n.taf_custshare_caf_recipientemoji+"\x3c/p\x3e";t=b("caf-emojis"+(h?"r":"")+".png","ssf-caf-emojis","A heart eyes emoji, a thinking emoji, and a frowning emoji");
return k+('\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n              '+q+'\n              \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n              '+f+"\n              "+a+"\n            \x3c/div\x3e "+('\x3cdiv class\x3d"ssf-caf-preview"\x3e\n              \x3cdiv class\x3d"a-padding-base ssf-caf-image"\x3e\n                \x3cdiv class\x3d"a-row ssf-caf-image-stickers"\x3e'+f+('\x3cdiv class\x3d"a-column ssf-caf-stickers"\x3e'+
n+t+"\x3c/div\x3e")+"\x3c/div\x3e\n                  "+a+"\n                \x3c/div\x3e\n            \x3c/div\x3e"))+"\x3c/div\x3e\n              "+d+"\n            \x3c/div\x3e"},getHmpImageSection:function(b){var c=b.productImage;b='\x3cdiv class\x3d"a-color-secondary a-padding-small ssf-title-text-hmp"\x3e\n    \x3cspan\x3e\n    '+a.sanitizeInput(b.hmpState.title)+"\n    \x3c/span\x3e\n    \x3c/div\x3e";return'\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n                '+e({productImage:c})+
"\n                "+b+"\n            \x3c/div\x3e"},getCustomizePreviewImage:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border ssf-cus-img-container"\x3e\n      \x3cdiv class\x3d"ssf-cus-img"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\x3c/div\x3e\n      '+g(a,"ssf-product-title-text-small")+"\n    \x3c/div\x3e"},getToggleContainer:function(a){var b=1<arguments.length&&arguments[1]!==m?arguments[1]:"",d=a.taf_custshare_caf_ingress_alt2,
e='\x3csmall\x3e\x3ca class\x3d"ssf-caf-toggle-ed-ingress a-size-base a-link-normal"\x3e'+(a.taf_custshare_caf_ingress_learn_more||"Learn more")+"\x3c/a\x3e\x3c/small\x3e",f=c("https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/information-default.png");return'\x3cdiv class\x3d"a-row a-spacing-top-medium-plus a-grid-vertical-align a-grid-center a-spacing-micro"\x3e\n      \x3cdiv class\x3d"a-column a-span1"\x3e\x3cdiv class\x3d"a-checkbox a-declarative a-checkbox-fancy ssf-caf-toggle" data-action\x3d"cafCheckboxAction"\x3e\n      \x3clabel class\x3d"a-padding-none" aria-labelledby\x3d"caf-checkbox-label"\x3e\n        \x3cinput class\x3d"a-declarative" name\x3d"caf" type\x3d"checkbox"\x3e\n        \x3ci class\x3d"a-icon a-icon-checkbox"\x3e\x3c/i\x3e\n      \x3c/label\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n      \x3cdiv class\x3d"a-column a-span10"\x3e\n        \x3csmall id\x3d"caf-checkbox-label" class\x3d"ssf-caf-toggle-label a-size-base"\x3e'+
d+".\x3c/small\x3e\n        "+(b===n.CAF_INFO_ICON_KEY?'\x3cspan class\x3d"ssf-info-icon ssf-caf-toggle-ed-ingress"\x3e\x3cstrong\x3e'+f+"\x3c/strong\x3e\x3c/span\x3e":b===n.CAF_LEARN_MORE_KEY?e:"")+"\n      \x3c/div\x3e\n    \x3c/div\x3e"},getEducationCXBody:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border"\x3e\n        '+('\x3cdiv class\x3d"a-color-secondary a-padding-small"\x3e\n      \x3cspan\x3e\n        '+(a.taf_custshare_caf_education_body||"Ask your friends for help. Use this option to ask friends to react to the item with an emoji. You can share the link by messaging your friends or posting on social media. You’ll get a notification for each reaction.")+
"\n      \x3c/span\x3e\n    \x3c/div\x3e")+'\n        \x3cdiv class\x3d"ssf-caf-education-video a-padding-base"\x3e\n          \x3cvideo id\x3d"ssf-caf-education-video" loop playsinline\x3e\n            \x3csource src\x3d"https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/caf-education-no-audio.mp4" type\x3d"video/mp4"\x3e\n          \x3c/video\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e'}}});"use strict";X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:
function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};r.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState","SocialShareWidgetOnShareUtils").register("SocialShareWidgetCustomizeUtils",function(d,f,r,n,a){function c(a){var b=a.values,c=b.BackgroundImageTab,d=b.DeviceCoverImageTab,l=b.BookQuotesTab;b=b.isConsultAFriendPreview;var e=a.productImageProperties;a=e.width;e=e.height;return{bgId:(c===m?{}:c).physicalId||"",
deviceId:(d===m?{}:d).physicalId||"",quoteValue:(l===m?{}:l).value||"",isConsultAFriendPreview:b===m?!1:b,width:a===m?"":a,height:e===m?"":e}}function g(b,c){var d=b.shareUrl,e=b.socialLinks;e=e===m?{}:e;d.refMarker.isBestFormatEnabled=b.isBestFormatEnabled;d=c?d.getReturnForChannel(c):d.return;c=a.getChannelName(c);var l=a.getOsType(),f=b.aapiBaseUrl,g=b.shareAapiCsrfToken,h=b.tinyUrlEnabled,n=b.deeplinkInfo;n=n===m?{}:n;var q=b.isOnShareGatingEnabled;q=q===m?!1:q;var u=b.shareDataAttributes,y=u.marketplaceId;
u=u.asin;return{tinyUrlEnabled:h===m?!1:h,aapiBaseUrl:f===m?"":f,shareAapiCsrfToken:g===m?"":g,marketplaceId:y===m?"":y,asin:u===m?"":u,url:d,originalUrl:e.shareframework||b.url||d,refMarkerId:k++,deeplinkInfo:n,isOnShareGatingEnabled:q,extractedRef:c,osType:l}}function e(a,b,c,d){if(c.isEmpty()||X(c.currentImage)===m||X(c.currentImage)!==m&&!c.currentImage.length)return d({});c=encodeURIComponent(c.currentImage);r.build(a).externalizeImage(c,d,b)}function b(a,b,c){r.build(a).generateImage(b,function(a){c(a.entity)})}
f=f.SocialShareCore;var u=d.constants.HIDE_CLASS,t=d.$,v=f.Constants,q=f.Metrics,D=f.Url,k=0;return{getEventName:function(a){return"a:sheet:after"+a+":ssf-customize-bottom-sheet"},getCustomizeImage:function(){return t(".ssf-cus-img")},getCustomizeImageContainer:function(){return t(".ssf-cus-img-container")},getRegularImage:function(){return t(".ssf-backend-preview .ssf-preview-container")},getPreviewBox:function(){return t(".ssf-preview-box")},setImage:function(a){this.imageState.currentPreview.css("background-image",
'url("'+a+'")')},showSpinner:function(){this.imageState.currentPreview.find(".a-spinner").removeClass(u)},hideSpinner:function(){this.imageState.currentPreview.find(".a-spinner").addClass(u)},transitionToCustomizePage:function(){t(".ssf-customize-container-one").addClass(u);t(".ssf-customize-container-two").removeClass(u).addClass("ssf-customize-transition")},transitionToCAFEducationPage:function(){t(".ssf-customize-container-one").addClass(u);t(".ssf-customize-container-three").removeClass(u).addClass("ssf-customize-transition");
var a=t("#ssf-caf-education-video").get(0);a&&(a.currentTime=0,a.play())},isCAFEducationPageVisible:function(){return t(".ssf-customize-container-three").is(":visible")},adjustCustomizedPreviewHeight:function(){this.getCustomizeImageContainer().css({width:.76*h.innerWidth});var a=parseInt(this.getCustomizeImage().css("border-left-width"))+parseInt(this.getCustomizeImage().css("border-right-width")),b=this.getCustomizeImage().innerWidth();this.getCustomizeImage().css({height:(b+a)/1.91})},adjustPreviewHeight:function(){this.getPreviewBox().css({width:.93*
h.innerWidth});var a=parseInt(this.getRegularImage().css("border-left-width"))+parseInt(this.getRegularImage().css("border-right-width")),b=this.getRegularImage().innerWidth();this.getRegularImage().css({height:(b+a)/1.91})},transitionToDefaultPage:function(){t(".ssf-customize-container-two").addClass(u);t(".ssf-customize-container-three").addClass(u);t(".ssf-customize-container-one").removeClass(u).addClass("ssf-customize-transition-back")},getImageData:function(a,b){var d=c(b);return{productImageUrl:a.productImage,
starRating:a.starRating||"",numberOfReviews:a.numberOfReviews||"",backgroundImagePhysicalId:d.bgId,deviceCoverImagePhysicalId:d.deviceId,bookQuote:d.quoteValue,productImageWidth:d.width,productImageHeight:d.height,consultAFriendPreviewEnabled:b.isConsultAFriendPreview,previewDohEnabled:a.previewDoh}},resetPreviewState:function(a){a.clear();0<a.defaultCustomizationOptions.length&&a.defaultCustomizationOptions.forEach(function(b){a.set(b)})},getBackendPreviewImage:function(a,c,d){var e=this;e.setImage("");
e.showSpinner();b(a,c,function(a){a&&"SUCCEEDED"===a.status?(a=a.customizedImage.url,e.hideSpinner(),e.setImage(a),d(a)):d()})},setCustomizeCSAData:function(a,b){var d=v.customizeShareStateKey;b=c(b);var e=v.TRUE,f=v.FALSE;n.set(d,{backgroundImagePhysicalId:b.bgId,deviceCoverImagePhysicalId:b.deviceId,hasQuote:0<b.quoteValue.length?e:f,isCustomizedExperienceEnabled:a.customize?e:f,isCustomized:b.bgId||b.deviceId||b.quoteValue?e:f,customizePreSelected:a.customizePreSelected?e:f,isQuotesAvailable:a.popularHighlightStrings?
e:f})},prepareShareUrl:function(a,b,c,d,f){this.setCustomizeCSAData(a,this.imageState);e(a,d,this.imageState,function(e){var k=e.entity;e=new URL(a.url);var h=b;k&&k.physicalId?(q.logCounterRefactor("externalizeImageSuccess"),e.searchParams.append("cspi",k.physicalId),h=b+"_"+v.BOOKS_REF_PREFIX):(a.customizePreSelected&&(q.logCounter("booksPreviewNotAvailable"),h=b+"_"+v.BOOKS_REF_PREFIX+"_"+v.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE),(a.caf||a.isUnrecognizedUsersRichPreviewEnabled||a.customize||a.isMWebCustomShareRichPreviewEnabledOverride)&&
e.searchParams.append("starsLeft","1"),a.eventPreviewTreatment&&"c"!==a.eventPreviewTreatment.toLowerCase()&&(k=a.eventPreviewTreatment.match(/^T(\d+)$/),e.searchParams.append("peakEvent",k[1]),q.logCounterRefactor("EventPreview"+a.eventPreviewTreatment,a.shareDataAttributes.ingress)));a.shareUrl=new D(e.toString(),a.refId);e=g(a,h);c.fetch({data:e,isAsync:d,callback:function(a){f(a)}})})},imageState:{clear:function(){this.values={}},isEmpty:function(){return t.isEmptyObject(this.values)},values:{},
unset:function(a){delete this.values[a.id]},set:function(a){this.values[a.id]=a},defaultCustomizationOptions:[],currentImage:"",isConsultAFriendPreview:!1,currentPreview:"",productImageProperties:{width:0,height:0}}}});"use strict";r.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetOnShareUtils").register("SocialShareWidgetCAFUtils",function(d,f,r,n){function a(a,d){var e=a.shareUrl,f=a.socialLinks;f=f===m?{}:f;e.refMarker.isBestFormatEnabled=a.isBestFormatEnabled;var g=a.isHmpShareSheet?
"hmp":c.CAF_REF_PREFIX;e=d?e.getReturnForChannel(g+"_"+d):e.return;d=n.getChannelName(d);g=n.getOsType();e=new URL(e);(a.caf||a.isUnrecognizedUsersRichPreviewEnabled||a.isMWebCustomShareRichPreviewEnabledOverride)&&e.searchParams.append("starsLeft","1");e.searchParams.has("language")||e.searchParams.append("language",h.languageOfPreference||a.locale||"en_US");e=e.toString();var k=a.aapiBaseUrl,l=a.shareAapiCsrfToken,u=a.tinyUrlEnabled,r=a.deeplinkInfo;r=r===m?{}:r;var t=a.isOnShareGatingEnabled,v=
a.shareDataAttributes.marketplaceId;return{tinyUrlEnabled:u===m?!1:u,aapiBaseUrl:k===m?"":k,shareAapiCsrfToken:l===m?"":l,marketplaceId:v===m?"":v,url:e,isOnShareGatingEnabled:t===m?!1:t,extractedRef:d,osType:g,originalUrl:f.shareframework||a.url||e,refMarkerId:b++,deeplinkInfo:r}}var c=f.SocialShareCore.Constants,g=f.SocialShareCore.Url,e=f.SocialShareCore.Metrics,b=0;return{prepareShareUrl:function(b,d,f,h,m){var k=b.refId;e.logCounterRefactor("CAF.shareChannelClick",b.ingress);e.startTimer("CAF.fetchCAFAndTinyURL");
k=c.CAF_REF_PREFIX+"_"+k;r.build(b).fetchCAFID(function(c,n){var l=new URL(b.url);c&&l.searchParams.append("cafId",c);n&&l.searchParams.append("cafASIN",n);b.shareUrl=new g(l.toString(),k);n=a(b,d);f.fetch({data:n,isAsync:h,callback:function(a){e.stopTimer("CAF.fetchCAFAndTinyURL");m(a,c)}})},h)},prepareHmpShareUrl:function(b,c,f,h,m){var k=b.refId;e.logCounter("HMP.shareChannelClick."+b.ingress);e.startTimer("HMP.fetchPollIdAndTinyURL");k="hmp."+k;r.build(b).fetchHmpPollId(function(l){var n=new URL(b.url);
l&&n.searchParams.append("hmpId",l);b.shareUrl=new g(n.toString(),k);b.url=n.toString();n=a(b,c);f.fetch({data:n,isAsync:h,callback:function(a){e.stopTimer("HMP.fetchPollIdAndTinyURL");d.trigger("ssf:event:hmpPollCreated",b);m(a,l)}})},h)}}});"use strict";r.when("A","SocialShareWidget","SocialShareWidgetTiny").register("SocialShareWidgetNativeUtils",function(d,f,h){var m=f.SocialShareCore.ShareSheet,a=d.constants.HIDE_CLASS,c=f.SocialShareCore.Metrics,g=c.getMetricName(d.$);return{showSpinner:function(c){c.addClass("ssf-noclick");
c.find(".a-spinner").removeClass(a);c.find("i").hide()},hideSpinner:function(c){c.removeClass("ssf-noclick");c.find(".a-spinner").addClass(a);c.find("i").show()},launchNativeShareSheet:function(a,b,f,n){var e=this;this.showSpinner(a.$currentTarget);f=f({shareData:b});var q=b.shareDataAttributes.ingress;b=d.extend(b,{sheetShownCallback:function(){e.hideSpinner(a.$currentTarget)}});h.fetch({data:f,callback:function(d){b.tinyUrl=d;(new m(b)).launch(function(){n(b);c.logCounter("DPX.Desktop.SheetOpen");
c.logCounter(g,"SheetOpen");c.logCounter("SheetOpen");c.logCounterRefactor("SheetOpen",q);e.hideSpinner(a.$currentTarget)})}})}}});"use strict";r.when("A","SocialShareWidget").register("SocialShareWidgetOnShareUtils",function(d,f){var h=f.SocialShareCore.Constants;return{getOsType:function(){switch(!0){case d.capabilities.ios:return"ios";case d.capabilities.android:return"android";default:return"unknown"}},getChannelName:function(d){return d?d.replace(h.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_",""):""}}})});
/* ******** */
